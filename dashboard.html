<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculate My Pension</title>
   
     
    <!-- Chart library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


     <!-- Bootstrap CSS -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
     <!-- Bootstrap Icons CSS -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
     <link rel="stylesheet" type="text/css" href="styles-tablet.css">
     
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light pe-3 sticky-top">
        <div class="container-fluid" style="background-color: #9e9a9a;">
            <!-- Brand -->
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                
                <img src="logo.png"   width="100" loading="lazy" >
                
                <span  >
                    <span style="font: Pacifico ;  font-weight: bold; font-size: larger; color: white;"> Calculate </span> 
                    <span style="font: 'Pacifico' ;font-weight: lighter; font-size: larger; "> My </span>
                    <span style="font: Pacifico ; font-weight: bold;font-size: larger ;color: white;"> Pension </span>
                </span>
                <!-- <span style="font: Pacifico  ">Calculate My Pension</span> -->
                <!-- <span><strong>Calculate My Pension</strong></span> -->
            </a>
            <!-- Navbar Toggler for Mobile View -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- Navbar Links -->
            <div class="collapse navbar-collapse" id="navbarNav" style="color: white;">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item me-3"><a class="nav-link" style="color: white; font-size: larger;" href="index.html">Home</a></li>
                    <li class="nav-item me-3"><a class="nav-link" style="color: white; font-size: larger;" href="quiz.html">Quiz</a></li>
                    <li class="nav-item me-3"><a class="nav-link" style="color: white; font-size: larger;" href="inputs.html">Inputs</a></li>
                    <li class="nav-item me-3"><a class="nav-link" style="color: white; font-size: larger;" href="dashboard.html">Dashboard</a></li>
                    <li class="nav-item me-3"><a class="nav-link" style="color: white; font-size: larger;" href="taxcalc.html">Calculators</a></li>
                    <li class="nav-item me-3"><a class="nav-link" style="color: white; font-size: larger;" href="learn.html">Learn</a></li>
                </ul>
            </div>
        </div>
    </nav>


  

    <!-- Main Content -->
    <div class="container-fluid" id="container" style="background: linear-gradient(to bottom right, #c1c0c0, #8d8b8b);">
    
        <div class="row">
    
            <!-- Left Accordion Column -->
            <div class="col-lg-3 col-md-12 col-sm-12 order-sm-1 order-lg-1" id="leftColumn" style="padding-left: 0; border-right: #2b2b2b; border-width: 1px; padding-right: 0; background: rgb(195, 194, 194)">
                
                <h3 style="text-align: center; margin-top: 4%; margin-bottom: 3%; color: white; text-shadow: 4px 4px 20px rgba(0, 0, 0, 0.5); ">Inputs</h3>
    
                <!-- Accordion: Inputs -->
                <div class="accordion mb-4" id="leftInputsAccordion">
                    <!-- Nested Accordion: Sections -->
                    <div class="accordion" id="leftUserSectionsAccordion">

                        <!-- Section: Your Current Situation -->
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="leftHeadingCurrentSituation">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#leftCollapseCurrentSituation" aria-expanded="false" aria-controls="leftCollapseCurrentSituation">
                                    <i class="bi bi-person-gear text-primary me-3" style="font-size: 1.5rem;"></i>
                                    Initial Details
                                </button>
                            </h3>
                            <div id="leftCollapseCurrentSituation" class="accordion-collapse collapse" aria-labelledby="leftHeadingCurrentSituation" data-bs-parent="#leftColumn">
                                <div class="accordion-body" style="border: 1px solid black;  background-color: #bbbbbb;">
                                    <form>
                                        

                                        

                                        <div class="row align-items-center mb-4 px-3" id="currrentAgeContainer">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="currentAgeSlider" class="form-label mb-0" style="width: 50%; font-size: 0.9rem;">
                                                    
                                                <strong>Current Age</strong></label>
                                        
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-1" 
                                                        onclick="adjustOutputBox2('currentAgePhone', 'currentAgeSlider', -1)" 
                                                        type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                        
                                                <!-- Slider -->
                                                <input type="range" class="form-range ms-1 me-1" style="width: 35%;" 
                                                       id="currentAgeSlider" min="18" max="100" value="50" step="1" 
                                                       oninput="updateOutput('currentAgePhone', this.value)">
                                        
                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-1 me-3" 
                                                        onclick="adjustOutputBox2('currentAgePhone', 'currentAgeSlider', 1)" 
                                                        type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                        
                                                <!-- Output Box -->
                                                <output id="currentAgePhone" class="form-control text-end" 
                                                        style="width: 20%; font-size: 0.9rem; overflow: hidden; font-weight: bold; color: #007bff;">50</output>
                                            </div>
                                        </div>

                                        <div class="d-flex justify-content-between align-items-center mb-3 px-3">
                                            <label class="form-check-label me-3" style="font-size: 0.9rem;" for="useScottishTaxSwitch">Resident in Scotland (Tax)<strong></strong></label>
                                            <div class="form-check form-switch ms-auto pe-2">
                                                <input class="form-check-input" type="checkbox" id="useScottishTaxPhone" onchange="toggleScottishTax(this)">
                                            </div>
                                        </div>

                                        <div class="d-flex justify-content-between align-items-center mb-3 px-3">
                                            
                                            <label class="form-check-label me-3" style="font-size: 0.9rem;" for="alreadyRetiredSwitch">
                                                Already Retired
                                            <strong></strong></label>
                                            
                                            <div class="form-check form-switch ms-auto pe-2">
                                                <input class="form-check-input" type="checkbox" id="alreadyRetiredSwitch" onchange="toggleAlreadyRetired(this)">
                                            </div>
                                        </div>

                                        <div class="d-flex justify-content-between align-items-center mb-3 px-3">
                                            
                                            <label class="form-check-label me-3" style="font-size: 0.9rem;" for="planAsCoupleSwitch">
                                                Plan as a Couple
                                            <strong></strong></label>
                                            
                                            <div class="form-check form-switch ms-auto pe-2">
                                                <input class="form-check-input" type="checkbox" id="planAsCoupleSwitch" onchange="togglePartnerInputs(this)">
                                            </div>
                                        </div>

                                        

                                        

                                        <div class="row align-items-center mt-2 mb-1 px-3" id="partnerAgeContainer">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="partnerAgeSlider" class="form-label mb-0" style="width: 50%; font-size: 0.9rem;">
                                                    
                                                <strong>Your Partner's Age</strong></label>
                                        
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-1" 
                                                        onclick="adjustOutputBox2('partnerAgePhone', 'partnerAgeSlider', -1)" 
                                                        type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                        
                                                <!-- Slider -->
                                                <input type="range" class="form-range ms-1 me-1" style="width: 35%;" id="partnerAgeSlider" min="18" max="100" value="50" step="1" oninput="updateOutput('partnerAgePhone', this.value)">
                                        
                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-1 me-3" 
                                                        onclick="adjustOutputBox2('partnerAgePhone', 'partnerAgeSlider', 1)" 
                                                        type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                        
                                                <!-- Output Box -->
                                                <output id="partnerAgePhone" class="form-control text-end" style="width: 20%; font-size: 0.9rem; overflow: hidden; font-weight: bold; color: #007bff;">50</output>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item" id="retirementAgeContainer">
                            <h3 class="accordion-header" id="leftHeadingRetirementAge">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#leftCollapseRetirementAge" aria-expanded="false" aria-controls="leftCollapseRetirementAge">
                                    <i class="bi bi-sign-stop text-primary me-3" style="font-size: 1.5rem;"></i>
                                    Retirement Age
                                </button>
                            </h3>
                            <div id="leftCollapseRetirementAge" class="accordion-collapse collapse" aria-labelledby="leftHeadingRetirementAge" data-bs-parent="#leftColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                                        <!-- Retirement Age Input -->
                                        <div class="row align-items-center mt-3 mb-3 px-3" >
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="retirementAgeSlider" class="form-label mb-0" style="width: 40%; font-size: 0.9rem;">
                                                    
                                                <strong>Retirement Age</strong></label>
                                        
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                        onclick="adjustOutputBox2('retirementAgePhone', 'retirementAgeSlider', -1)" 
                                                        type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                        
                                                <!-- Slider -->
                                                <input type="range" class="form-range  me-1" style="width: 30%;" 
                                                       id="retirementAgeSlider" min="50" max="75" value="65" step="1" 
                                                       oninput="updateOutput('retirementAgePhone', this.value)">
                                        
                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2 me-4" 
                                                        onclick="adjustOutputBox2('retirementAgePhone', 'retirementAgeSlider', 1)" 
                                                        type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                        
                                                <!-- Output Box -->
                                                <output id="retirementAgePhone" class="form-control text-end" 
                                                        style="width: 15%; font-size: 0.9rem; overflow: hidden; font-weight: bold; color: #007bff;">65</output>
                                            </div>
                                        </div>

                                        <!-- Partner's Retirement Age Input -->
                                        

                                        <div class="row align-items-center mt-2 mb-1 px-3" id="partnerRetirementAgeContainer">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="partnerRetirementAgeSlider" class="form-label mb-0" style="width: 85%; font-size: 0.9rem;">
                                                    
                                                <strong>Your Partner's Retirement Age</strong></label>
                                        
                                               
                                        
                                                <!-- Output Box -->
                                                <output id="partnerRetirementAgePhone" class="form-control text-end" 
                                                        style="width: 15%; font-size: 0.9rem; overflow: hidden; font-weight: bold; color: #007bff;">65</output>

                                                
                                            </div>
                                            <p class="form-label mt-4 mb-1" style="font-size: 0.9rem; width: 90%">The calculator assumes that you and your partner retire at the same time. </p>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>



                        <!-- Section: Your Retirement Income Goals -->
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="leftHeadingRetirementGoals">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#leftCollapseRetirementGoals" aria-expanded="false" aria-controls="leftCollapseRetirementGoals">
                                    <i class="bi bi-wallet2 text-primary me-3" style="font-size: 1.5rem;"></i>
                                    Retirement Income Goals
                                </button>
                            </h3>
                            <div id="leftCollapseRetirementGoals" class="accordion-collapse collapse" aria-labelledby="leftHeadingRetirementGoals" data-bs-parent="#leftColumn">
                                <div class="accordion-body" style="border: 1px solid black;  background-color: #bbbbbb;">
                                    <form>
                                        

                                        <div class="mb-3 px-3">
                                            <p class="form-label" style="font-size: 0.9rem;">
                                                Select a standard of living: 
                                            </p>

                                            <div class="three-way-toggle d-flex justify-content-between align-items-center text-center" id="livingStandardsTogglePhone" style="overflow: hidden;">
                                                <input type="radio" id="option1" name="togglePhone" value="Option 1" checked>
                                                <label for="option1" class="px-2 fs-8 fs-md-12"><strong>Minimum</strong></label>
                                            
                                                <input type="radio" id="option2" name="togglePhone" value="Option 2">
                                                <label for="option2" class="px-2 fs-8 fs-md-12"><strong>Moderate</strong></label>
                                            
                                                <input type="radio" id="option3" name="togglePhone" value="Option 3">
                                                <label for="option3" class="px-2 fs-8 fs-md-12"><strong>Comfortable</strong></label>
                                            </div>

                                            
                                        </div>    

                                        <!-- Resident in London -->
                                        <div class="row align-items-center mb-3 px-3">
                                            <div class="col-8">
                                                <label class="form-check-label" for="useScottishTaxSwitch" style="font-size: 0.9rem;">
                                                    <strong>Resident in London</strong>
                                                    <i class="bi bi-info-circle-fill ms-2" 
                                                    style="cursor: pointer; font-size: 1.0rem; color: #fafafa;" 
                                                    data-bs-toggle="tooltip" 
                                                    data-bs-placement="top" 
                                                    title="The higher cost of living in London is taken into account in the recommended retirement income levels."></i>
                                                </label>
                                            </div>
                                            <div class="col-4 text-center">
                                                <input class="form-check-input" type="checkbox" id="londonResident" onchange="toggleLondonResident()">
                                            </div>
                                            
                                        </div>
                                            
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="desiredIncomeSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Desired Monthly Income</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="inputDesiredIncomePhone" class="form-control text-end" style="max-width: 35%; font-size: 0.9rem; font-weight: bold; color: #4CAF50;" data-raw-value="0">0</output>
                                            </div>
                                        
                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 ms-2 me-3">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('inputDesiredIncomePhone', 'desiredIncomeSlider', -50)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="desiredIncomeSlider" 
                                                    min="0" max="10000" step="50" value="0" 
                                                    oninput="updateOutput('inputDesiredIncomePhone', this.value)">
                                        
                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('inputDesiredIncomePhone', 'desiredIncomeSlider', 50)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="desiredCombinedIncomeSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Desired Combined Monthly Income</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="inputDesiredCombinedIncomePhone" class="form-control text-end" style="max-width: 35%;min-width: 100px; font-size: 0.9rem; font-weight: bold; color: #4CAF50;" data-raw-value="0">0</output>
                                            </div>
                                        
                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 ms-2 me-3">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('inputDesiredCombinedIncomePhone', 'desiredCombinedIncomeSlider', -50)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="desiredCombinedIncomeSlider" 
                                                    min="0" max="10000" step="50" value="0" 
                                                    oninput="updateOutput('inputDesiredCombinedIncomePhone', this.value)">
                                        
                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('inputDesiredCombinedIncomePhone', 'desiredCombinedIncomeSlider', 50)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        
                                        
                                    </form>
                                </div>
                            </div>
                        </div>



                        

                        

                        <div class="accordion-item">
                            <h3 class="accordion-header" id="definedContributionInputsAccordion">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#leftCollapseDefinedContribution" aria-expanded="false" aria-controls="leftCollapseDefinedContribution">
                                    <i class="bi bi-graph-up-arrow" style="font-size: 1.5rem; color: #007bff; margin-right: 1rem;"></i>
                                    Defined Contribution Pension
                                </button>
                            </h3>
                            <div id="leftCollapseDefinedContribution" class="accordion-collapse collapse" aria-labelledby="definedContributionInputsAccordion" data-bs-parent="#leftColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                                        <!-- Current Pension Fund -->
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="currentFundSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Current Pension Fund</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="currentFundPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0</output>
                                            </div>
                                        
                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3  me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('currentFundPhone', 'currentFundSlider', -500)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="currentFundSlider" 
                                                       min="0" max="1000000" step="500" value="0" 
                                                       oninput="updateOutput('currentFundPhone', this.value)">
                                        
                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('currentFundPhone', 'currentFundSlider', 500)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                        
                                        <!-- Future Contributions -->
                                        <div class="mb-3 px-3 mt-5" id="pensionContributionsContainer">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="monthlyPensionContributionsSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Monthly Contribution</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="inputMonthlyContributionPhone" class="form-control text-end" style="max-width: 35%;min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0</output>
                                            </div>
                                        
                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('inputMonthlyContributionPhone', 'monthlyPensionContributionsSlider', -10)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="monthlyPensionContributionsSlider" 
                                                       min="0" max="5000" step="10" value="0" 
                                                       oninput="updateOutput('inputMonthlyContributionPhone', this.value)">
                                        
                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('inputMonthlyContributionPhone', 'monthlyPensionContributionsSlider', 10)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>


                                            <div class="d-flex  align-items-center mt-4" id="increaseContributionsWithInflationContainer">
                                                <!-- Label for the switch -->
                                                <label class="form-check-label me-3" style="font-size: 0.9rem;" for="inflationLinkedContributionSwitch">
                                                    Increase Contributions with Inflation ?
                                                <strong></strong></label>
                                                <!-- Switch -->
                                                <div class="form-check form-switch ms-auto ">
                                                    <input class="form-check-input ms-auto" type="checkbox" checked id="inflationLinkedContributionSwitch" onchange="toggleInflationLinkedContributions(this)">
                                                </div>
                                            </div>

                                            <div class="d-flex  align-items-center mt-4">
                                                <label class="form-check-label mb-0" for="percentageContributionSwitch" style="font-size: 0.9rem;">
                                                    Set Contributions as % of Salary?
                                                <strong></strong></label>
                                                <div class="form-check form-switch ms-auto ">
                                                <input class="form-check-input ms-auto " type="checkbox" id="percentageContributionSwitch" onchange="togglePercentageContribution(this)">
                                                </div>
                                            </div>

                                            <div id="percentageContributionInputs" style="display:none;">
                                                <!-- User's Salary -->
                                                <div class="d-flex justify-content-between align-items-center mt-4">
                                                    <!-- Label -->
                                                    <label for="salarySlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Salary</strong></label>

                                                    <!-- Output Box -->
                                                    <output id="salaryPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">Â£0</output>
                                                </div>

                                                <!-- Slider and Adjustment Buttons Row -->
                                                <div class="d-flex align-items-center mt-3 me-1">
                                                    <!-- Minus Button -->
                                                    <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                        onclick="adjustOutputBox2('salaryPhone', 'salarySlider', -1000)" 
                                                        type="button" aria-label="Decrease">
                                                        <i class="bi bi-dash"></i>
                                                    </button>

                                                    <!-- Slider -->
                                                    <input type="range" class="form-range flex-grow-1 mx-2" id="salarySlider" 
                                                        min="0" max="200000" step="1000" value="0" 
                                                        oninput="updateOutput('salaryPhone', this.value, 'currency'); updateMonthlyContributionFromPercentage();">

                                                    <!-- Plus Button -->
                                                    <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                        onclick="adjustOutputBox2('salaryPhone', 'salarySlider', 1000)" 
                                                        type="button" aria-label="Increase">
                                                        <i class="bi bi-plus"></i>
                                                    </button>
                                                </div>

                                                <!-- User's Percentage Contribution -->
                                                <div class="d-flex justify-content-between align-items-center mt-4">
                                                    <!-- Label -->
                                                    <label for="salaryPercentSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Percentage Contribution</strong></label>

                                                    <!-- Output Box -->
                                                    <output id="salaryPercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0%</output>
                                                </div>

                                                <!-- Slider and Adjustment Buttons Row -->
                                                <div class="d-flex align-items-center mt-3 me-1">
                                                    <!-- Minus Button -->
                                                    <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                        onclick="adjustOutputBox2('salaryPercentPhone', 'salaryPercentSlider', -1)" 
                                                        type="button" aria-label="Decrease">
                                                        <i class="bi bi-dash"></i>
                                                    </button>

                                                    <!-- Slider -->
                                                    <input type="range" class="form-range flex-grow-1 mx-2" id="salaryPercentSlider" 
                                                        min="0" max="20" step="1" value="0" 
                                                        oninput="updateOutput('salaryPercentPhone', this.value, 'percentage'); updateMonthlyContributionFromPercentage();">

                                                    <!-- Plus Button -->
                                                    <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                        onclick="adjustOutputBox2('salaryPercentPhone', 'salaryPercentSlider', 1)" 
                                                        type="button" aria-label="Increase">
                                                        <i class="bi bi-plus"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        
                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h3 class="accordion-header" id="definedBenefitInputsAccordion">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#leftCollapseDefinedBenefit" aria-expanded="false" aria-controls="leftCollapseDefinedBenefit">
                                    <i class="bi bi-shield-check text-primary me-3" style="font-size: 1.5rem;"></i>
                                    Defined Benefit Pension
                                </button>
                            </h3>
                            <div id="leftCollapseDefinedBenefit" class="accordion-collapse collapse" aria-labelledby="definedBenefitInputsAccordion" data-bs-parent="#leftColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                                        <!-- Annual Pension -->
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="annualPensionSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Annual Pension</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="dbPensionAmountPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0</output>
                                            </div>
                                        
                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('dbPensionAmountPhone', 'annualPensionSlider', -50)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="annualPensionSlider" 
                                                       min="0" max="150000" step="50" value="0" 
                                                       oninput="updateOutput('dbPensionAmountPhone', this.value)">
                                        
                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('dbPensionAmountPhone', 'annualPensionSlider', 50)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                        
                                        <!-- Pension Payable Age -->
                                        <div class="mb-3 px-3 mt-5">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="dbPensionAgeSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Pension Payable Age</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="dbPensionAgePhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="65">65</output>
                                            </div>
                                        
                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('dbPensionAgePhone', 'dbPensionAgeSlider', -1)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="dbPensionAgeSlider" 
                                                       min="55" max="75" step="1" value="65" 
                                                       oninput="updateOutput('dbPensionAgePhone', this.value)">
                                        
                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('dbPensionAgePhone', 'dbPensionAgeSlider', 1)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h3 class="accordion-header" id="ISAInputsAccordion">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#leftCollapseISA" aria-expanded="false" aria-controls="leftCollapseISA">
                                    <i class="bi bi-piggy-bank text-primary me-3" style="font-size: 1.5rem;"></i>
                                    ISA Details
                                </button>
                            </h3>
                            <div id="leftCollapseISA" class="accordion-collapse collapse" aria-labelledby="ISAInputsAccordion" data-bs-parent="#leftColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                                        <!-- Current ISA Holdings -->
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="currentISASlider" id="cashISALabel" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Current ISA Holdings</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="currentISAPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('currentISAPhone', 'currentISASlider', -50)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="currentISASlider" 
                                                    min="0" max="500000" step="50" value="0" 
                                                    oninput="updateOutput('currentISAPhone', this.value)">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('currentISAPhone', 'currentISASlider', 50)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Monthly ISA Contribution -->
                                        <div class="mb-3 px-3 mt-5" id="ISAContributionsContainer">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="monthlyISADepositsSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Monthly Contribution</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="inputMonthlyISAContributionPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('inputMonthlyISAContributionPhone', 'monthlyISADepositsSlider', -10)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="monthlyISADepositsSlider" 
                                                    min="0" max="1667" step="10" value="0" 
                                                    oninput="updateOutput('inputMonthlyISAContributionPhone', this.value)">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('inputMonthlyISAContributionPhone', 'monthlyISADepositsSlider', 10)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>

                                            <div class="d-flex justify-content-between align-items-center mb-3 px-3 mt-4">
                                                <!-- Label for the switch -->
                                                <label class="form-check-label me-3" style="font-size: 0.9rem;" for="inflationLinkedISAContributionSwitch">
                                                    Increase Contributions with Inflation ?
                                                <strong></strong></label>
                                                <!-- Switch -->
                                                <div class="form-check form-switch ms-auto pe-2">
                                                    <input class="form-check-input" type="checkbox" checked id="inflationLinkedISAContributionSwitch" onchange="toggleInflationLinkedContributions(this)">
                                                </div>
                                            </div>
                                        </div>    
                                        
                                        

                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="accordion-item">
                            <h3 class="accordion-header" id="OtherIncomeInputsAccordion">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#leftCollapseOtherIncome" aria-expanded="false" aria-controls="leftCollapseOtherIncome">
                                    <i class="bi bi-briefcase text-primary me-3" style="font-size: 1.5rem;"></i>
                                    Other Income Details
                                </button>
                            </h3>
                            <div id="leftCollapseOtherIncome" class="accordion-collapse collapse" aria-labelledby="OtherIncomeInputsAccordion" data-bs-parent="#leftColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                                        <!-- Other Income Amount -->
                                        <div class="mb-3 px-3 mt-4">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label for="otherIncomeAmountSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;">
                                                    <strong>Annual Other Income</strong>
                                                </label>
                                                <output id="otherIncomeAmountPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0</output>
                                            </div>
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2"
                                                        onclick="adjustOutputBox2('otherIncomeAmountPhone', 'otherIncomeAmountSlider', -100)" 
                                                        type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="otherIncomeAmountSlider" 
                                                       min="0" max="100000" step="100" value="0" 
                                                       oninput="updateOutput('otherIncomeAmountPhone', this.value, 'currency')">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2"
                                                        onclick="adjustOutputBox2('otherIncomeAmountPhone', 'otherIncomeAmountSlider', 100)" 
                                                        type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                        
                                        <!-- Other Income Stop Age -->
                                        <div class="mb-3 px-3 mt-4">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label for="otherIncomeStopAgeSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;">
                                                    <strong>Age When Income Stops</strong>
                                                </label>
                                                <output id="otherIncomeStopAgePhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="75">75</output>
                                            </div>
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2"
                                                        onclick="adjustOutputBox2('otherIncomeStopAgePhone', 'otherIncomeStopAgeSlider', -1)" 
                                                        type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="otherIncomeStopAgeSlider" 
                                                       min="50" max="100" step="1" value="75" 
                                                       oninput="updateOutput('otherIncomeStopAgePhone', this.value)">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2"
                                                        onclick="adjustOutputBox2('otherIncomeStopAgePhone', 'otherIncomeStopAgeSlider', 1)" 
                                                        type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- Section: Tax Free Cash -->
                        <div class="accordion-item" id="taxFreeLumpSumContainer">
                            <h3 class="accordion-header" id="leftHeadingTaxFreeCash">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#leftCollapseTaxFreeCash" aria-expanded="false" aria-controls="leftCollapseTaxFreeCash">
                                    <i class="bi bi-cash-stack text-primary me-3" style="font-size: 1.5rem;"></i>
                                    Tax Free Lump Sum
                                </button>
                            </h3>
                            <div id="leftCollapseTaxFreeCash" class="accordion-collapse collapse" aria-labelledby="leftHeadingTaxFreeCash" data-bs-parent="#leftColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>

                                        <div class="mb-4 mt-1 px-3 me-3">
                                            <p id= "TFCExplainerLabel" class="result-label" style="font-size: 0.9rem;">
                                                If you wish to take a tax-free lump sum out of your fund at retirement, please enter the percentage of your fund you would like to withdraw. The maximum is <strong>25%</strong>.
                                            </p>
                                        </div>

                                        <!-- Tax-Free Lump Sum -->
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="taxFreeCashSlider" class="form-label mb-0" style="max-width: 75%; font-size: 0.9rem;"><strong>Tax Free Lump Sum %</strong> </label>
                                                
                                                <!-- Output Box -->
                                                <output id="inputTaxFreeCashPercentPhone" class="form-control text-end" style="max-width: 25%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0%</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('inputTaxFreeCashPercentPhone', 'taxFreeCashSlider', -1)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="taxFreeCashSlider" 
                                                    min="0" max="25" step="1" value="0" 
                                                    oninput="updateOutput('inputTaxFreeCashPercentPhone', this.value, 'percentage')">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2 mb-1" 
                                                    onclick="adjustOutputBox2('inputTaxFreeCashPercentPhone', 'taxFreeCashSlider', 1)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        

                                        <!-- Tax-Free Lump Sum Output -->
                                        <div class="mb-4 px-3 mt-4" id="TFCAmountContainer">
                                            <div class="result-row d-flex align-items-center hidden">
                                                <div id="inputTFCTakenLabel" class="result-label" style="font-size: 0.9rem; width: 70%;"><strong>Tax Free Cash Lump Sum Amount</strong></div>
                                                <div id="inputTFCTaken" style="color: #2ab811; width: 30%;" class="result-output"></div>
                                            </div>

                                            <div class="mb-3 mt-3 ">
                                                <p id= "TFCMaxExplainerLabel" class="result-label" style="font-size: 0.9rem;">
                                                    
                                                </p>
                                            </div>
                                        </div>  

                                        


                                         
                                    </form>
                                </div>
                            </div>
                        </div>


                        

                    </div>
                </div>


                

               
    
                
                    
          
                <h3 id="yourPartnersInputsHeading" class="hidden" style="text-align: center; margin-top: 5%; margin-bottom: 3%; color: white; text-shadow: 4px 4px 20px rgba(0, 0, 0, 0.5); ">Your Partner's Inputs</h3>

                
                    <!-- Nested Accordion: Sections -->
                    <div class="accordion" id="leftPartnerSectionsAccordion">

                        <div class="accordion-item" >
                            <h3 class="accordion-header" id="partnerDefinedContributionInputsAccordion" >
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#leftCollapsePartnersDefinedContribution" aria-expanded="false" aria-controls="leftCollapsePartnersDefinedContribution">
                                    <i class="bi bi-graph-up-arrow" style="font-size: 1.5rem; color: purple; margin-right: 1rem;"></i>
                                    Your Partner's Defined Contribution Pension
                                </button>
                            </h3>
                            <div id="leftCollapsePartnersDefinedContribution" class="accordion-collapse collapse" aria-labelledby="partnerDefinedContributionInputsAccordion" data-bs-parent="#leftColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                                        <!-- Partner's Current Pension Fund -->
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="partnerCurrentFundSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Current Pension Fund</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="partnerCurrentFundPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('partnerCurrentFundPhone', 'partnerCurrentFundSlider', -500)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="partnerCurrentFundSlider" 
                                                    min="0" max="1000000" step="500" value="0" 
                                                    oninput="updateOutput('partnerCurrentFundPhone', this.value)">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('partnerCurrentFundPhone', 'partnerCurrentFundSlider', 500)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Partner's Monthly Pension Contributions -->
                                        <div class="mb-3 px-3 mt-5" id="partnerPensionContributionsContainer">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="partnerMonthlyContributionSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Monthly Pension Contributions</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="partnerMonthlyContributionPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('partnerMonthlyContributionPhone', 'partnerMonthlyContributionSlider', -10)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="partnerMonthlyContributionSlider" 
                                                    min="0" max="5000" step="10" value="0" 
                                                    oninput="updateOutput('partnerMonthlyContributionPhone', this.value)">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('partnerMonthlyContributionPhone', 'partnerMonthlyContributionSlider', 10)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>

                                            <div class="d-flex justify-content-between mt-4" id="partnerIncreaseContributionsWithInflationContainer">
                                                <!-- Label for the switch -->
                                                <label class="form-check-label mb-0" style="font-size: 0.9rem;" for="inflationLinkedContributionSwitchPartner">
                                                    Increase Contributions with Inflation ?
                                                <strong></strong></label>
                                                <!-- Switch -->
                                                <div class="form-check form-switch ms-auto ">
                                                    <input class="form-check-input ms-auto" type="checkbox" checked id="inflationLinkedContributionSwitchPartner" onchange="toggleInflationLinkedContributions(this)">
                                                </div>
                                            </div>

                                            <div class="d-flex align-items-center mt-4">
                                                <label class="form-check-label mb-0" for="partnerPercentageContributionSwitch" style="font-size: 0.9rem;">
                                                    Set Contributions as % of Salary?
                                                <strong></strong></label>
                                                <div class="form-check form-switch ms-auto">
                                                    <input class="form-check-input ms-auto" type="checkbox" id="partnerPercentageContributionSwitch" onchange="togglePartnerPercentageContribution(this)">
                                                </div>
                                            </div>

                                            <div id="partnerPercentageContributionInputs" style="display:none;">
                                                <!-- Partner's Salary -->
                                                <div class="d-flex justify-content-between align-items-center mt-4">
                                                    <!-- Label -->
                                                    <label for="partnerSalarySlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Partner's Salary</strong></label>
                                            
                                                    <!-- Output Box -->
                                                    <output id="partnerSalaryPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">Â£0</output>
                                                </div>
                                            
                                                <!-- Slider and Adjustment Buttons Row -->
                                                <div class="d-flex align-items-center mt-3 me-1">
                                                    <!-- Minus Button -->
                                                    <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                        onclick="adjustOutputBox2('partnerSalaryPhone', 'partnerSalarySlider', -1000)" 
                                                        type="button" aria-label="Decrease">
                                                        <i class="bi bi-dash"></i>
                                                    </button>
                                            
                                                    <!-- Slider -->
                                                    <input type="range" class="form-range flex-grow-1 mx-2" id="partnerSalarySlider" 
                                                            min="0" max="200000" step="1000" value="0" 
                                                            oninput="updateOutput('partnerSalaryPhone', this.value, 'currency'); updatePartnerMonthlyContributionFromPercentage();">
                                            
                                                    <!-- Plus Button -->
                                                    <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                        onclick="adjustOutputBox2('partnerSalaryPhone', 'partnerSalarySlider', 1000)" 
                                                        type="button" aria-label="Increase">
                                                        <i class="bi bi-plus"></i>
                                                    </button>
                                                </div>
                                            
                                                <!-- Partner's Percentage Contribution -->
                                                <div class="d-flex justify-content-between align-items-center mt-4">
                                                    <!-- Label -->
                                                    <label for="partnerSalaryPercentSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Partner's Percentage Contribution</strong></label>
                                            
                                                    <!-- Output Box -->
                                                    <output id="partnerSalaryPercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0%</output>
                                                </div>
                                            
                                                <!-- Slider and Adjustment Buttons Row -->
                                                <div class="d-flex align-items-center mt-3 me-1">
                                                    <!-- Minus Button -->
                                                    <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                        onclick="adjustOutputBox2('partnerSalaryPercentPhone', 'partnerSalaryPercentSlider', -1)" 
                                                        type="button" aria-label="Decrease">
                                                        <i class="bi bi-dash"></i>
                                                    </button>
                                            
                                                    <!-- Slider -->
                                                    <input type="range" class="form-range flex-grow-1 mx-2" id="partnerSalaryPercentSlider" 
                                                            min="0" max="20" step="1" value="0" 
                                                            oninput="updateOutput('partnerSalaryPercentPhone', this.value, 'percentage'); updatePartnerMonthlyContributionFromPercentage();">
                                            
                                                    <!-- Plus Button -->
                                                    <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                        onclick="adjustOutputBox2('partnerSalaryPercentPhone', 'partnerSalaryPercentSlider', 1)" 
                                                        type="button" aria-label="Increase">
                                                        <i class="bi bi-plus"></i>
                                                    </button>
                                                </div>
                                            </div>

                                        </div>

                                        
                                    </form>
                                </div>
                            </div>
                        </div>


                        <div class="accordion-item">
                            <h3 class="accordion-header" id="partnerDefinedBenefitInputsAccordion">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#leftCollapsePartnersDefinedBenefit" aria-expanded="false" aria-controls="leftCollapsePartnersDefinedBenefit">
                                    <i class="bi bi-shield-check text-primary me-3" style="font-size: 1.5rem; color: purple !important;"></i>
                                    Your Partner's Defined Benefit Pension
                                </button>
                            </h3>
                            <div id="leftCollapsePartnersDefinedBenefit" class="accordion-collapse collapse" aria-labelledby="partnerDefinedBenefitInputsAccordion" data-bs-parent="#leftColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                                        <!-- Partner's Annual Pension Amount -->
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="partnerAnnualPensionSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Annual Pension Amount</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="partnerDbPensionAmountPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">Â£0</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('partnerDbPensionAmountPhone', 'partnerAnnualPensionSlider', -500, 'currency')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="partnerAnnualPensionSlider" 
                                                    min="0" max="100000" step="500" value="0" 
                                                    oninput="updateOutput('partnerDbPensionAmountPhone', this.value, 'currency')">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('partnerDbPensionAmountPhone', 'partnerAnnualPensionSlider', 500, 'currency')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Partner's Normal Retirement Age -->
                                        <div class="mb-3 px-3 mt-5">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="partnerDbRetirementAgeSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Normal Retirement Age</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="partnerDbRetirementAgePhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="65">65</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('partnerDbRetirementAgePhone', 'partnerDbRetirementAgeSlider', -1, 'plain')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="partnerDbRetirementAgeSlider" 
                                                    min="50" max="75" step="1" value="65" 
                                                    oninput="updateOutput('partnerDbRetirementAgePhone', this.value, 'plain')">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('partnerDbRetirementAgePhone', 'partnerDbRetirementAgeSlider', 1, 'plain')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>


                        <div class="accordion-item">
                            <h3 class="accordion-header" id="partnerISAInputsAccordion">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#leftCollapsePartnersISA" aria-expanded="false" aria-controls="leftCollapsePartnersISA">
                                    <i class="bi bi-piggy-bank text-primary me-3" style="font-size: 1.5rem; color: purple !important;"></i>
                                    Your Partner's ISA Details
                                </button>
                            </h3>
                            <div id="leftCollapsePartnersISA" class="accordion-collapse collapse" aria-labelledby="partnerISAInputsAccordion" data-bs-parent="#leftColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                                        <!-- Partner's Current ISA Holdings -->
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="partnerCurrentISASlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Current ISA Holdings</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="partnerCurrentISAPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('partnerCurrentISAPhone', 'partnerCurrentISASlider', -500)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="partnerCurrentISASlider" 
                                                    min="0" max="500000" step="500" value="0" 
                                                    oninput="updateOutput('partnerCurrentISAPhone', this.value)">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('partnerCurrentISAPhone', 'partnerCurrentISASlider', 500)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Partner's Monthly ISA Contributions -->
                                        <div class="mb-3 px-3 mt-5" id="partnerISAContributionContainer">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="partnerMonthlyISAContributionSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Monthly ISA Contributions</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="partnerMonthlyISAContributionPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('partnerMonthlyISAContributionPhone', 'partnerMonthlyISAContributionSlider', -10)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="partnerMonthlyISAContributionSlider" 
                                                    min="0" max="1667" step="10" value="0" 
                                                    oninput="updateOutput('partnerMonthlyISAContributionPhone', this.value, 'currency')">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('partnerMonthlyISAContributionPhone', 'partnerMonthlyISAContributionSlider', 10)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>

                                            <div class="d-flex justify-content-between align-items-center mb-3 px-3 mt-4">
                                                <!-- Label for the switch -->
                                                <label class="form-check-label me-3" style="font-size: 0.9rem;" for="inflationLinkedISAContributionSwitchPartner">
                                                    
                                                <strong>Increase Contributions with Inflation ?</strong></label>
                                                <!-- Switch -->
                                                <div class="form-check form-switch ms-auto pe-2">
                                                    <input class="form-check-input" type="checkbox" checked id="inflationLinkedISAContributionSwitchPartner" onchange="toggleInflationLinkedContributions(this)">
                                                </div>
                                            </div>
                                        </div>

                                        
                                    </form>
                                </div>
                            </div>
                        </div>


                        <div class="accordion-item">
                            <h3 class="accordion-header" id="partnerOtherIncomeInputsAccordion">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#leftCollapsePartnerOtherIncome" aria-expanded="false" aria-controls="leftCollapsePartnerOtherIncome">
                                    <i class="bi bi-briefcase text-primary me-3" style="font-size: 1.5rem; color: purple !important;"></i>
                                    Your Partnerâs Other Income
                                </button>
                            </h3>
                            <div id="leftCollapsePartnerOtherIncome" class="accordion-collapse collapse" aria-labelledby="partnerOtherIncomeInputsAccordion" data-bs-parent="#leftColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                                        <!-- Partner Other Income Amount -->
                                        <div class="mb-3 px-3 mt-4">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label for="partnerOtherIncomeAmountSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;">
                                                    <strong>Annual Other Income</strong>
                                                </label>
                                                <output id="partnerOtherIncomeAmountPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0</output>
                                            </div>
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2"
                                                        onclick="adjustOutputBox2('partnerOtherIncomeAmountPhone', 'partnerOtherIncomeAmountSlider', -100)" 
                                                        type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="partnerOtherIncomeAmountSlider" 
                                                       min="0" max="100000" step="100" value="0" 
                                                       oninput="updateOutput('partnerOtherIncomeAmountPhone', this.value, 'currency')">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2"
                                                        onclick="adjustOutputBox2('partnerOtherIncomeAmountPhone', 'partnerOtherIncomeAmountSlider', 100)" 
                                                        type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                        
                                        <!-- Partner Other Income Stop Age -->
                                        <div class="mb-3 px-3 mt-4">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label for="partnerOtherIncomeStopAgeSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;">
                                                    <strong>Age When Income Stops</strong>
                                                </label>
                                                <output id="partnerOtherIncomeStopAgePhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="75">75</output>
                                            </div>
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2"
                                                        onclick="adjustOutputBox2('partnerOtherIncomeStopAgePhone', 'partnerOtherIncomeStopAgeSlider', -1)" 
                                                        type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="partnerOtherIncomeStopAgeSlider" 
                                                       min="50" max="100" step="1" value="75" 
                                                       oninput="updateOutput('partnerOtherIncomeStopAgePhone', this.value)">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2"
                                                        onclick="adjustOutputBox2('partnerOtherIncomeStopAgePhone', 'partnerOtherIncomeStopAgeSlider', 1)" 
                                                        type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>



                        <div class="accordion-item" id = "partnerTaxFreeLumpSumContainer">
                            <h3 class="accordion-header" id="partnerHeadingTaxFreeCash">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#partnerCollapseTaxFreeCash" aria-expanded="false" aria-controls="partnerCollapseTaxFreeCash">
                                    <i class="bi bi-cash-stack text-primary me-3" style="font-size: 1.5rem; color: purple !important;"></i>
                                    Tax Free Lump Sum
                                </button>
                            </h3>
                            <div id="partnerCollapseTaxFreeCash" class="accordion-collapse collapse" aria-labelledby="partnerHeadingTaxFreeCash" data-bs-parent="#leftColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                        
                                        <div class="mb-3 mt-1 px-3 me-3">
                                            <p id="partnerTFCExplainerLabel" class="result-label" style="font-size: 0.9rem;">
                                                If your partner wishes to take a tax-free lump sum out of their fund at retirement, please enter the percentage of their fund they would like to withdraw.
                                            </p>
                                        </div>
                        
                                        <!-- Tax-Free Lump Sum -->
                                        <div class="mb-3 px-3 mt-3">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="partnerTaxFreeCashSlider" class="form-label mb-0" style="max-width: 75%; font-size: 0.9rem;"><strong>Tax Free Lump Sum %</strong> </label>
                        
                                                <!-- Output Box -->
                                                <output id="partnerInputTaxFreeCashPercentPhone" class="form-control text-end" style="max-width: 25%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0%</output>
                                            </div>
                        
                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('partnerInputTaxFreeCashPercentPhone', 'partnerTaxFreeCashSlider', -1)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                        
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="partnerTaxFreeCashSlider" 
                                                    min="0" max="25" step="1" value="0" 
                                                    oninput="updateOutput('partnerInputTaxFreeCashPercentPhone', this.value, 'percentage')">
                        
                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2 mb-1" 
                                                    onclick="adjustOutputBox2('partnerInputTaxFreeCashPercentPhone', 'partnerTaxFreeCashSlider', 1)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                        
                                        <!-- Tax-Free Lump Sum Output -->
                                        <div class="mb-4 px-3 mt-4" id="partnerTFCAmountContainer">
                                            <div class="result-row d-flex align-items-center hidden">
                                                <div id="partnerInputTFCTakenLabel" class="result-label" style="font-size: 0.9rem; width: 70%;"><strong>Tax Free Cash Lump Sum Amount</strong></div>
                                                <div id="partnerInputTFCTaken" style="color: #2ab811; width: 30%;" class="result-output"></div>
                                            </div>

                                            <div class="mb-3 mt-4 ">
                                                <p id="partnerTFCMaxExplainerLabel" class="result-label" style="font-size: 0.9rem;">
                                                </p>
                                            </div>
                                        </div>  
                        
                                        
                        
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    

                        
        
                    
                
          
            </div>
    
            <!-- Graph Column -->
            <div class="col-lg-6 col-md-12 col-sm-12 order-sm-3 order-lg-2" id="mainColumn" style="padding-left: 0; padding-right: 0; ">
                
                <div class="graph-container" style="background: linear-gradient(to bottom right, #c1c0c0, #757272); border: 1px solid #ccc; padding-top: 1rem; height: 150%; min-height: 300px;">
                    <!-- Center all graphs using Bootstrap -->
                    <div id="graphPlaceholder" class="d-flex flex-column align-items-center gap-3" style="width: 100%; height: auto;">

                        <div class="d-flex justify-content-between align-items-center p-3" 
                            style="opacity: 1; width: 100%;">
                            <!-- Left Button -->
                            <button id="leftButton" class="btn btn-sm btn-light d-flex align-items-center " onclick="toggleLeftColumn()">

                                <i class="bi bi-chevron-bar-left"></i>
                                <span class="ms-1" id="leftToggleText"><Strong>Hide</Strong></span>
                            </button>

                            <!-- Title -->
                            <h3 style="text-align: center; margin: 0; color: white; text-shadow: 4px 4px 20px rgba(0, 0, 0, 0.5);">Dashboard</h3>

                            <!-- Right Button -->
                            <button id="rightButton" class="btn btn-sm btn-light d-flex align-items-center" onclick="toggleRightColumn()">
                                <span class="me-1" id="rightToggleText"><strong>Open Panel</strong></span>
                                <i class="bi bi-chevron-bar-left"></i>
                            </button>
                        </div>

                        <div class="d-flex justify-content-between align-items-center p-0 flex-grow-1" style="width: 100%;">
                            <!-- Left Section -->
                            <div class="d-flex flex-fill justify-content-center align-items-center">
                                
                            </div>
                            <!-- Right Section -->
                            <div class="d-flex flex-fill justify-content-center align-items-center">
                                
                            </div>
                        </div>
                    
                    
                    
                    
                    
                    
                    

                        <div class="accordion-body d-flex align-items-center justify-content-around; flex-grow-1" style="padding-bottom: 2rem; gap: 4vw;">

                            <!-- First Result Container -->
                            <div class="result-container" style="display: flex; flex-direction: column; gap: 0.5rem; width: 49%;">
                                <div class="result-row d-flex align-items-center">
                                    <h5 style="margin: 0; color: white; text-shadow: 4px 4px 20px rgba(0, 0, 0, 0.5); white-space: nowrap; margin-left: auto; margin-right: 2%;">INCOME</h5>
                                </div>
                                
                                <div class="result-row d-flex align-items-center">
                                    <div class="result-label" id="expectedTotalIncomeLabel" 
                                        style="font-size: 0.9rem; width: 75%; text-align: left; white-space: nowrap; padding: 0;">
                                        
                                    </div>
                                    <div id="expectedTotalIncomeTodaysMoneyPhone" 
                                        style="color: #2196F3; margin-left: 10px;" 
                                        class="result-output"></div>
                                </div>
                            
                                <div class="result-row d-flex align-items-center">
                                    <span class="result-label" id="desiredMonthlyIncomeLabel" 
                                        style="font-size: 0.9rem; width: 75%; text-align: left; white-space: nowrap; padding: 0;">
                                        
                                    </span>
                                    <div id="desiredMonthlyIncomeAtRetirementPhone" 
                                        style="color: #FF9800; margin-left: 10px;" 
                                        class="result-output"></div>
                                </div>
                            
                                <div class="result-row d-flex align-items-center">
                                    <span class="result-label" 
                                        style="font-size: 0.9rem; width: 75%; text-align: left; white-space: nowrap; padding: 0;" 
                                        id="shortfallAtRetirementTextPhone">
                                        <strong></strong>
                                    </span>
                                    <div id="shortfallAtRetirementPhone" 
                                        class="result-output" 
                                        style="margin-left: 10px;"></div>
                                </div>
                            </div>
                    
                            <!-- Second Result Container -->
                            <div class="result-container" style="display: flex; flex-direction: column; gap: 0.5rem; width: 55%; min-width: 20vw;">
                                <div class="result-row d-flex align-items-center me-3">
                                    <h5 style="margin: 0; color: white; text-shadow: 4px 4px 20px rgba(0, 0, 0, 0.5); white-space: nowrap; margin-left: auto;">KEY METRICS</h5>
                                </div>
                                <div class="result-row d-flex align-items-center">
                                    <label class="result-label" id="initialIncomeYieldLabel" style="font-size: 0.9rem;width: 70%;">ISA Holdings at Retirement :
                                     
                                    </label>
                                    
                                    <div id="initialIncomeYield" style="color:#2196F3;" class="result-output"></div>
                                    <i class="bi bi-info-circle-fill ms-2" 
                                    style="cursor: pointer; font-size: 1.0rem; color: #fafafa;" 
                                    data-bs-toggle="tooltip" 
                                    data-bs-placement="top" 
                                    title="First year retirement income divided by the value of your pension fund plus ISA at retirement.">
                                </i>
                                </div>
                                <div class="result-row d-flex align-items-center">
                                    <span class="result-label" id="totalFutureTaxRateLabel" style="font-size: 0.9rem; width: 70%">Pension Fund at Retirement :</span>
                                    <div id="totalFutureTaxRate" style="color: #2196F3; " class="result-output"></div>
                                    <i class="bi bi-info-circle-fill ms-2" 
                                    style="cursor: pointer; font-size: 1.0rem; color: #fafafa;" 
                                    data-bs-toggle="tooltip" 
                                    data-bs-placement="top" 
                                    title="Total future tax on retirement income divided by total future retirement income.">
                                </i>
                                </div>
                               
                                <div class="result-row d-flex align-items-center">
                                    <span class="result-label" id="totalChargeRateLabel" style="font-size: 0.9rem;width: 70%;" id="totalChargeRateLabel">Total Future Charges :</span>
                                    <div id="totalChargeRate" style="color: #2196F3;" class="result-output"></div>
                                    <i class="bi bi-info-circle-fill ms-2" 
                                    style="cursor: pointer; font-size: 1.0rem; color: #fafafa;" 
                                    data-bs-toggle="tooltip" 
                                    data-bs-placement="top" 
                                    data-bs-html="true"
                                    title="Total future charges to pension fund and ISA divided by total future income from these sources.">
                                </i>
                                </div>
                            </div>

                    </div>
                    
                    



                    <div class="d-flex justify-content-around align-items-center gap-3" style="width: 90%; margin-bottom: 2%; margin-left: 7%; margin-right: 3%;">

                        <!-- Dropdown Menu -->
                        <div class="d-flex align-items-center ms-4 " >
                            <label class="form-check-label me-2" style="font-size: 0.8rem;" for="chartSelector"><strong>Select Chart:</strong></label>
                            <select class="form-select form-select-sm" id="chartSelector" style="width: auto;" onchange="updateChartVisibility('onDropdown')">
                                <option value="income" selected>Income Breakdown</option>
                                <option value="fund">Fund Values</option>
                                <option value="tax">Tax Payments</option>
                                <option value="charges">Fund Charges</option>
                            </select>
                        </div>
                        
                         
                       
                    
                        <!-- Today's Money Switch -->
                        <div class="d-flex align-items-center ms-4 " id="todaysMoneySwitch">
                            <label class="form-check-label me-1" style="font-size: 0.8rem; padding-right: 0.5rem;" for="applyInflationAdjustmentPhone"><strong>Show Values In Today's Money</strong></label>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="applyInflationAdjustmentPhone" onchange="toggleValuePerspective(this)">
                            </div>
                        </div>

                         <!-- Frequency Switch -->
                         <div class="d-flex align-items-center ms-4 " id="frequencySwitch">
                            <label class="form-check-label me-1" style="font-size: 0.8rem; padding-right: 0.5rem;" for="frequencySliderPhone"><strong>Show Annual Amounts</strong></label>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="frequencySliderPhone" onchange="toggleIncomePeriod(this)">
                            </div>
                        </div>
                            
                    </div>
                        


                    <!-- Income Chart -->
                    <div class="d-flex justify-content-center " id="incomeChartContainer" style=" margin-bottom: 5%; width: 85%; height: 40%;">
                        <canvas id="incomeChart" style="min-height: 20rem; width: 100%;"></canvas>
                    </div>
                
                    <!-- Fund Chart -->
                    <div class="d-flex justify-content-center hidden"  id="fundChartContainer" style=" margin-bottom: 5%; width: 85%; height: 40%;">
                        <canvas id="fundChart" style="min-height: 20rem; width: 100%;"></canvas>
                    </div>

                    <!-- Tax Chart -->
                   <!--  <div class="d-flex justify-content-center " id="taxChartContainer" style=" margin-bottom: 5%;width: 85%; height: 40%;">
                        <canvas id="taxChartTablet" style="min-height: 20rem; width: 100%;"></canvas>
                    </div> -->

                    <div class="d-flex justify-content-center " id="taxBySourceChartContainer" style=" margin-bottom: 5%;width: 85%; height: 40%;">
                        <canvas id="taxBySourceChartTablet" style="min-height: 20rem; width: 100%;"></canvas>
                    </div>

                     <!-- Tax Band Chart -->
                     <div class="d-flex justify-content-center hidden" id="taxBandChartContainer" style=" margin-bottom: 5%;width: 85%; height: 40%;">
                        <canvas id="taxBandChartTablet" style="min-height: 20rem; width: 100%;"></canvas>
                    </div>


                    <!--Charges Chart -->
                    <div class="d-flex justify-content-center hidden" id="chargesChartContainer" style=" margin-bottom: 5%;width: 85%; height: 40%;">
                        <canvas id="chargesChartTablet" style="min-height: 20rem; width: 100%;"></canvas>
                    </div>
                    
                    <!-- TFC Chart -->
                    <div class="d-flex justify-content-center hidden" id="TFCChartContainer" style=" margin-bottom: 5%;width: 85%; height: 40%;">
                        <canvas id="TFCChartTablet" style="min-height: 20rem; width: 100%;"></canvas>
                    </div>
                    
                        

                        <!-- <div class="disclaimer " id="assumptionsText">
                            <p>
                                <strong> Calculation Parameters Valid at November 2024:</strong> 
                                
                                <br>- Default values for Fund Growth of 7%, Inflation of 3% and Fund Charges of 1%. 
                                <br>- Full state pension of Â£11,976 with escalation of 2.5% or inflation, whichever is higher.
                                <br>- State pension age is 67 if current age is less than 62. Otherwise 66.
                                <br>- Earliest age for pension withdrawals is 57 if current age is 53 or younger. Otherwise 55.
                                <br>- Annual contributions limited to Â£60,000 for pensions and Â£20,000 for ISAs.
                                <br>- Maximum TFC of 25% with total capped at Â£268,275.
                                <br>- Latest tax bands and rates for England & Wales and separate regime for Scotland.
                                
                            </p>
                        </div> -->

                        <!-- Disclaimer Section -->
                        <div class="disclaimer " id="disclaimerText">
                            <p>
                                <strong>Disclaimer:</strong> This calculation is for information purposes only and does not constitute financial advice. 
                                The calculations and projections offered by this tool are based on user-provided inputs and general assumptions, which may not reflect your specific circumstances or needs. 
                                The results should not be relied upon as a sole basis for financial decisions. 
                                For financial advice, please consult a qualified financial adviser.
                                
                            </p>
                        </div>


                        

                        <div class="d-flex justify-content-between align-items-center p-3" 
                            style="opacity: 1; width: 100%;">
                            <!-- Left Button -->
                            <button id="leftButton2" class="btn btn-sm btn-light d-flex align-items-center " style="white-space: nowrap;" onclick="toggleLeftColumn()">

                                <i class="bi bi-chevron-bar-left"></i>
                                <span class="ms-1" id="leftToggleText2"><strong>Hide</strong></span>
                            </button>

                            <div class="d-flex justify-content-start align-items-center gap-3" style="width: 90%;  margin-left: 8%;">
                                <!-- Dropdown Menu -->
                                <label class="form-check-label me-2" style="font-size: 0.8rem;" for="tableSelector"><strong>Select Table:</strong></label>
                                <select class="form-select form-select-sm" id="tableSelector" style="width: auto;" onchange="updateTableVisibility()">
                                    <option value="retirementIncome">Retirement Income</option>
                                    <option value="pensionFundCashflow">Pension Fund Cashflow</option>
                                    <option value="ISACashflow">ISA Cashflow</option>
                                </select>

                              <!--   <button id="downloadCSVButton" class="btn btn-sm btn-light d-flex align-items-center " style="white-space: nowrap; font-weight: lighter;" onclick="toggleRightColumn()">
                                    <i class="bi bi-download me-1"></i>
                                    <span class="ms-1" id="rightToggleText2"><strong> Download Table to CSV</strong></span>
                                    
                                </button> -->
                            </div>


                            

                           

                            <!-- Right Button -->
                            <button id="rightButton2" class="btn btn-sm btn-light d-flex align-items-center" style="white-space: nowrap;" onclick="toggleRightColumn()">
                                <span class="me-1" id="rightToggleText2"><strong>Open Panel</strong></span>
                                <i class="bi bi-chevron-bar-left"></i>
                            </button>
                        </div>
                        
                        <div class="table-section">
                            
                            <div class="table-container">

                                <div class="table-responsive" id="retirementIncomeTableContainer">
                                    
                                    <table id="retirementIncomeTable">
                                        <thead>
                                            <tr>
                                                <!-- Age -->
                                                <th>Age</th>
                                                
                        
                                                <!-- State Pension -->
                                                <th>Gross State Pension<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about State Pension">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                        <p>State Pension (Before Tax):<br><br>Assumes that you are entitled to the maximum amount. Your actual state pension depends on your national insurance record. 
                                                        <br><br>The current state pension is revalued up to the state pension age by the larger of 2.5% and the specified inflation rate. It is also increased annually once in payment by this same percentage.
                                                    </div>
                                                </th>
                
                                                  <!-- DB Pension -->
                                                  <th>Gross DB Pension<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about DB Pension">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                        <p>Defined Benefit Pension (Before Tax):<br><br>The Defined Benefit (DB) pension income, beginning at the DB pension age and increasing yearly by the specified escalation rate.
                                                    </div>
                                                </th>
                
                                                <th>Gross Annuity Payments<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Annuity Income">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                        <p>Annuity Income (Before Tax):<br><br>Income received from an annuity purchased with part or all of the pension fund.</p>
                                                    </div>
                                                </th>

                                                <!-- Pension Fund Income -->
                                                <th>Gross Pension Fund Income<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Pension Fund Income">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                        <p>Pension Fund Income (Before Tax):<br><br>The income withdrawn from your pension fund.</p>
                                                    </div>
                                                </th>
                
                                                 <!-- Total Gross Income -->
                                                 <th>Total Taxable Income<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Total Gross Income">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                        <p>Total Taxable Income:<br><br>State Pension<br>+ DB Pension <br>+ Gross Pension Fund Income 
                                                        <br><br>ISA Withdrawals are not taxable so not included here.</p>
                                                    </div>
                                                </th>
                        
                                                <!-- Net on State Pension -->
                                                <th>Net State Pension<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Tax on State Pension">i</span>
                                                    <div class="info-popup" role="tooltip" aria-hidden="true">
                                                        <p>Net State Pension:<br><br>State pension is assumed to be the first layer of pension income, so the last to accrue a tax payment. Only taxable if the state pension exceeds the tax free personal allowance.</p>
                                                    </div>
                                                </th>
                                                      
                                                <!-- Net on DB Pension -->
                                                <th>Net DB Pension<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Tax on DB Pension">i</span>
                                                    <div class="info-popup" role="tooltip" aria-hidden="true">
                                                        <p>Net DB Pension:<br><br>DB pension income is taken as the second slice of taxable income. </p>
                                                    </div>
                                                </th>
                        
                                                <th>Net Annuity Payments<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Tax on Annuity Payments">i</span>
                                                    <div class="info-popup" role="tooltip" aria-hidden="true">
                                                        <p>Net Annuity Payments:<br><br>Tax on Annuity Payments is calculated as a third layer after other income components have been taxed, meaning that the annuity income may be subject to a higher marginal tax rate.<br><br>It reflects the tax on annuity income once any available allowances have been used on other income sources.</p>
                                                    </div>
                                                </th>
                                                     
                                                <!-- Net on Pension Fund Income -->
                                                <th>Net Pension Fund Income<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Tax on Pension Fund Income">i</span>
                                                    <div class="info-popup" role="tooltip" aria-hidden="true">
                                                        <p>Net Pension Fund Income:<br><br>Pension Fund Income is taken as the last layer of income and so it will accrue the highest tax rate.<br><br>It may seem lower than expected because 25% is taken as tax free before the usual tax calculation (if no tax free lump sum is taken at retirement). </p>
                                                    </div>
                                                </th>
                                                
                        
                                                <!-- Total Tax Paid -->
                                                <th>Total Tax Paid<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Total Tax Paid">i</span>
                                                    <div class="info-popup" role="tooltip" aria-hidden="true">
                                                        <p>Total Tax Paid:<br><br>The total tax paid on total taxable income. There is no national insurance on pension income. The tax calculation is based on the latest tax rates and bands.<br><br> These will be different if the Scottish tax regime is selected.</p>
                                                    </div>
                                                </th>
                
                                                 <!-- ISA Withdrawals -->
                                                 <th>ISA Withdrawals<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about ISA Withdrawals">i</span>
                                                    <div class="info-popup special-left" style="left: -100px;" role="tooltip" aria-hidden="true">
                                                        <p>ISA Withdrawals:<br><br>The amount withdrawn from your ISA . Withdrawals are tax-free and made only when needed.</p>
                                                    </div>
                                                </th>
                        
                                                <!-- Total Net Income -->
                                                <th>Total Net Income<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Total Net Income">i</span>
                                                    <div class="info-popup" style="left: -200px;"  role="tooltip" aria-hidden="true">
                                                        <p>Total Net Income:<br><br>Total Taxable Income - Total Tax Paid</p>
                                                    </div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Rows will be added dynamically by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>


                                <div class="table-responsive hidden" id="pensionFundCashFlowTableContainer">

                                    <table id="pensionFundCashFlowTable">
                                        <thead>
                                            <tr>
                
                                                <th>
                                                    Age  
                                                </th>
                
                                                <!-- Opening Balance -->
                                                <th>Opening Balance</th>
                        
                                                <!-- Pension Contributions -->
                                                <th>Pension Contributions<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Pension Contributions">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                        <p>Pension Contributions:<br><br>The annual contributions to your pension, calculated as your monthly contributions multiplied by 12. <br><br>It is assumed that you will increase the level of contributions to keep in line with inflation, maintaining a fixed percentage of your salary or earnings.</p>
                                                    </div>
                                                </th>
                        
                                                <!-- Growth -->
                                                <th>Fund Growth<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Growth">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                            <p>Pension Fund Growth:<br><br>Annual growth of the pension fund, based on your chosen pre-retirement and post-retirement growth rate.</p>
                                                    </div>
                                                </th>
                        
                                                <!-- Charges -->
                                                <th>Fund Charges<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Charges">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                        <p>Pension Fund Charges:<br><br>The total charges deducted from your pension fund for the year, based on the percentage entered as annual fund charges.</p>
                                                    </div>
                                                </th>


                                                <!-- Pension Fund Income -->
                                                <th>Gross Pension Fund Income<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Pension Fund Income">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                        <p>Pension Fund Income (Before Tax):<br><br>The income withdrawn from your pension fund.</p>
                                                    </div>
                                                </th>


                                                <!-- Tax Free Cash Part -->
                                                <th>Tax Free Pension Fund Income<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Pension Fund Income">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                        <p>Tax Free Pension Fund Income:<br><br>The tax free part of your pension fund income available if you have not taken a lump sum at retirement, or the lump sum was less than 25%.</p>
                                                    </div>
                                                </th>
                        
                                                <!-- Tax -->
                                                <th>Tax on Pension Fund Income<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Tax">i</span>
                                                    <div class="info-popup" role="tooltip" aria-hidden="true">
                                                        <p>Tax on Pension Fund Income:<br><br>The tax paid on income from your pension fund for the year, calculated based on current income tax bands and rates. <br><br>The tax on state pension and DB pension are not shown here but do feed into the calculation.</p>
                                                    </div>
                                                </th>
                        
                                                <!-- Withdrawals -->
                                                <th>Net Pension Received<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Withdrawals">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                        <p>Net Pension Received:<br><br>The pension income you receive after tax is deducted. <br><br>Tax is calculated based on the total taxable income for the year.</p>
                                                    </div>
                                                </th>
                        
                                                <!-- Closing Balance -->
                                                <th>Closing Balance<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Closing Balance">i</span>
                                                    <div class="info-popup" role="tooltip" aria-hidden="true">
                                                        <p>Pension Fund Closing Balance:<br><br>Opening Balance<br>+ Pension Contributions <br>+ Fund Growth <br>- Fund Charges  <br>- Tax on Pension Fund Income<br>- Net Pension Received </p>
                                                    </div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Rows will be added dynamically by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>


                                <div class="table-responsive hidden" id="ISACashFlowTableContainer">
                                     <table id="ISACashFlowTable" >
                                        <thead>
                                            <tr>
                                                <th>Age</th>
                        
                                                <!-- Opening Balance -->
                                                <th>Opening Balance</th>
                        
                                                <!-- ISA Contributions -->
                                                <th>ISA Contributions<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about ISA Contributions">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                        <p>ISA Contributions:<br><br>The annual contributions to your ISA, calculated as your monthly contributions multiplied by 12. <br><br>It is assumed that you will increase the level of contributions in line with inflation.</p>
                                                    </div>
                                                </th>
                        
                                                <!-- Growth -->
                                                <th>ISA Growth<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about ISA Growth">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                        <p>ISA Growth:<br><br>Annual growth of your ISA holdings, based on the growth rate you selected.</p>
                                                    </div>
                                                </th>
                        
                                                <!-- Charges -->
                                                <th>ISA Charges<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about ISA Charges">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                        <p>ISA Charges:<br><br>The total charges deducted from your ISA for the year, based on the annual charge rate entered.</p>
                                                    </div>
                                                </th>
                        
                                                <!-- Withdrawals -->
                                                <th>ISA Withdrawals<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about ISA Withdrawals">i</span>
                                                    <div class="info-popup special-left" role="tooltip" aria-hidden="true">
                                                        <p>ISA Withdrawals:<br><br>The amount withdrawn from your ISA to supplement your income.</p>
                                                    </div>
                                                </th>
                        
                                                <!-- Closing Balance -->
                                                <th>Closing Balance<br><br>
                                                    <span class="info-icon" tabindex="0" aria-label="More information about Closing Balance">i</span>
                                                    <div class="info-popup" role="tooltip" aria-hidden="true">
                                                        <p>ISA Closing Balance:<br><br>Opening Balance<br>+ ISA Contributions <br>+ ISA Growth <br>- ISA Charges <br>- ISA Withdrawals</p>
                                                    </div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <!-- Rows will be added dynamically by JavaScript -->
                                        </tbody>
                                    </table>

                                </div>

                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
    
            <!-- Right Accordion Column -->
            <div class="col-lg-3 col-md-12 col-sm-12 order-sm-2 order-lg-3 hidden-column" id="rightColumn"  style="padding-left: 0; padding-right: 0; background: rgb(195, 194, 194)">
                
                

                <h3 style="text-align: center; margin-top: 5%; margin-bottom: 3%; color: white; text-shadow: 4px 4px 20px rgba(0, 0, 0, 0.5);  ">Assumptions</h3>

                <!-- Accordion: Features -->
                <div class="accordion mb-4" id="rightInputsAccordion">
                <!-- Main Accordion: Sections -->
                <div class="accordion" id="rightAccordion">
                    

                    <!-- Section: Projection Age -->
                    <div class="accordion-item">
                        <h3 class="accordion-header" id="leftHeadingProjectionAge">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#leftCollapseProjectionAge" aria-expanded="false" aria-controls="leftCollapseProjectionAge">
                                <i class="bi bi-heart-pulse text-primary me-3" style="font-size: 1.5rem; color: #139806 !important;"></i>
                                Projection End Age
                            </button>
                        </h3>
                        <div id="leftCollapseProjectionAge" class="accordion-collapse collapse" aria-labelledby="leftHeadingProjectionAge" data-bs-parent="#leftColumn">
                            <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                <form>
                                    <!-- Projection Age -->
                                    <div class="mb-3 px-3 mt-4">
                                        <!-- Label and Output Row -->
                                        <div class="d-flex justify-content-between align-items-center">
                                            <!-- Label -->
                                            <label for="endAgeSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Projection Age</strong></label>
                                            
                                            <!-- Output Box -->
                                            <output id="endAgePhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="95">95</output>
                                        </div>

                                        <!-- Slider and Adjustment Buttons Row -->
                                        <div class="d-flex align-items-center mt-3 me-1">
                                            <!-- Minus Button -->
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                onclick="adjustOutputBox2('endAgePhone', 'endAgeSlider', -1)" 
                                                type="button" aria-label="Decrease">
                                                <i class="bi bi-dash"></i>
                                            </button>
                                            
                                            <!-- Slider -->
                                            <input type="range" class="form-range flex-grow-1 mx-2" id="endAgeSlider" 
                                                min="85" max="100" step="1" value="95" 
                                                oninput="updateOutput('endAgePhone', this.value)">

                                            <!-- Plus Button -->
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                onclick="adjustOutputBox2('endAgePhone', 'endAgeSlider', 1)" 
                                                type="button" aria-label="Increase">
                                                <i class="bi bi-plus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

            

                    <!-- Section: Fund Growth Assumptions -->
                    <div class="accordion-item">
                        <h3 class="accordion-header" id="rightFundGrowthAssumptions">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#rightCollapseFundGrowthAssumptions" aria-expanded="false" aria-controls="rightCollapseFundGrowthAssumptions">
                                <i class="bi bi-graph-up-arrow" 
                                style="font-size: 1.5rem; color: #139806 !important; margin-right: 1rem;"></i>
                                Fund Growth
                            </button>
                        </h3>
                        <div id="rightCollapseFundGrowthAssumptions" class="accordion-collapse collapse" aria-labelledby="rightFundGrowthAssumptions" data-bs-parent="#leftColumn">
                            <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                <form>
                                    <!-- Fund Growth -->
                                    <div class="mb-3 px-3 mt-4">
                                        <!-- Label and Output Row -->
                                        <div class="d-flex justify-content-between align-items-center">
                                            <!-- Label -->
                                            <label for="fundGrowthSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"> <strong>Fund Growth</strong></label>
                                            
                                            <!-- Output Box -->
                                            <output id="fundGrowthPercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="7">7%</output>
                                        </div>

                                        <!-- Slider and Adjustment Buttons Row -->
                                        <div class="d-flex align-items-center mt-3 me-1">
                                            <!-- Minus Button -->
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                onclick="adjustOutputBox2('fundGrowthPercentPhone', 'fundGrowthSlider', -0.25, 'percentage')" 
                                                type="button" aria-label="Decrease">
                                                <i class="bi bi-dash"></i>
                                            </button>
                                            
                                            <!-- Slider -->
                                            <input type="range" class="form-range flex-grow-1 mx-2" id="fundGrowthSlider" 
                                                min="0" max="10" step="0.25" value="7" 
                                                oninput="updateOutput('fundGrowthPercentPhone', this.value, 'percentage')">

                                            <!-- Plus Button -->
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                onclick="adjustOutputBox2('fundGrowthPercentPhone', 'fundGrowthSlider', 0.25 , 'percentage')" 
                                                type="button" aria-label="Increase">
                                                <i class="bi bi-plus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>

                            <div class="accordion-body" id="ISAGrowthContainer" style="border: 1px solid black; border-top: none; background-color: #bbbbbb;">
                                <form>
                                    
                                    <div class="mb-3 px-3 mt-4" >
                                        
                                        <div class="d-flex justify-content-between align-items-center">
                                            <!-- Label -->
                                            <label for="isaGrowthSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"> <strong>ISA Growth</strong></label>
                                            
                                            <!-- Output Box -->
                                            <output id="isaGrowthPercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="5">5%</output>
                                        </div>
                                        
                                        <!-- Slider and Adjustment Buttons Row -->
                                        <div class="d-flex align-items-center mt-3 me-1">
                                            <!-- Minus Button -->
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                onclick="adjustOutputBox2('isaGrowthPercentPhone', 'isaGrowthSlider', -0.25, 'percentage')" 
                                                type="button" aria-label="Decrease">
                                                <i class="bi bi-dash"></i>
                                            </button>
                                            
                                            <!-- Slider -->
                                            <input type="range" class="form-range flex-grow-1 mx-2" id="isaGrowthSlider" 
                                                min="0" max="10" step="0.25" value="5" 
                                                oninput="updateOutput('isaGrowthPercentPhone', this.value, 'percentage')">
                                        
                                            <!-- Plus Button -->
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                onclick="adjustOutputBox2('isaGrowthPercentPhone', 'isaGrowthSlider', 0.25, 'percentage')" 
                                                type="button" aria-label="Increase">
                                                <i class="bi bi-plus"></i>
                                            </button>
                                        </div>
                                        
                                        <!-- <p class="form-label" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                            You may wish to specify a lower growth in retirement to reflect investment in assets with lower volatility.
                                        </p>

                                        
                                        <div class="d-flex justify-content-between align-items-center">
                                            <label for="fundGrowthPostSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;">Lower Fund Growth in Retirement <strong></strong></label>
                                            <output id="fundGrowthPostPercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #FF9800; font-size: 0.9rem; overflow: hidden;" data-raw-value="5">5%</output>
                                        </div>

                                        
                                        <div class="d-flex align-items-center mt-3 me-1">
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                onclick="adjustOutputBox2('fundGrowthPostPercentPhone', 'fundGrowthPostSlider', -0.25, 'percentage')" 
                                                type="button" aria-label="Decrease">
                                                <i class="bi bi-dash"></i>
                                            </button>
                                            
                                            <input type="range" class="form-range flex-grow-1 mx-2" id="fundGrowthPostSlider" 
                                                min="0" max="7" step="0.25" value="5" 
                                                oninput="updateOutput('fundGrowthPostPercentPhone', this.value, 'percentage')">
            
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                onclick="adjustOutputBox2('fundGrowthPostPercentPhone', 'fundGrowthPostSlider', 0.25, 'percentage')" 
                                                type="button" aria-label="Increase">
                                                <i class="bi bi-plus"></i>
                                            </button>
                                        </div> -->
                                    </div>
                                </form>
                            </div>

                            
                        </div>
                    </div>

                    <!-- Section: Interest Rate & Inflation -->
                    <div class="accordion-item">
                        <h3 class="accordion-header" id="rightInterestRateInflation">
                            <button class="accordion-button collapsed" id="inflationInterestLabel" type="button" data-bs-toggle="collapse" data-bs-target="#rightCollapseInterestRateInflation" aria-expanded="false" aria-controls="rightCollapseInterestRateInflation">
                                Interest Rate & Inflation
                            </button>
                        </h3>
                        <div id="rightCollapseInterestRateInflation" class="accordion-collapse collapse" aria-labelledby="rightInterestRateInflation" data-bs-parent="#leftColumn">
                            <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                <form>
                                    <!-- Inflation -->
                                    <div class="mb-3 px-3 mt-4">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <label for="inflationSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;">Inflation <strong></strong></label>
                                            <output id="inflationPercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="2.5">2.5%</output>
                                        </div>
                                        <div class="d-flex align-items-center mt-3 me-1">
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('inflationPercentPhone', 'inflationSlider', -0.25, 'percentage')" 
                                                    type="button" aria-label="Decrease">
                                                <i class="bi bi-dash"></i>
                                            </button>
                                            <input type="range" class="form-range flex-grow-1 mx-2" id="inflationSlider" 
                                                min="0" max="5" step="0.25" value="2.5" 
                                                oninput="updateOutput('inflationPercentPhone', this.value, 'percentage')">
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('inflationPercentPhone', 'inflationSlider', 0.25, 'percentage')" 
                                                    type="button" aria-label="Increase">
                                                <i class="bi bi-plus"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Cash ISA Interest Rate -->
                                    <div class="mb-3 px-3 mt-4" id="cashISAInterestRateContainer">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <label for="isaInterestRateSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"> <strong>Cash ISA Interest Rate</strong></label>
                                            <output id="isaInterestRatePercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="2.5">2.5%</output>
                                        </div>
                                        <div class="d-flex align-items-center mt-3 me-1">
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('isaInterestRatePercentPhone', 'isaInterestRateSlider', -0.25, 'percentage')" 
                                                    type="button" aria-label="Decrease">
                                                <i class="bi bi-dash"></i>
                                            </button>
                                            <input type="range" class="form-range flex-grow-1 mx-2" id="isaInterestRateSlider" 
                                                min="0.5" max="10" step="0.25" value="2.5" 
                                                oninput="updateOutput('isaInterestRatePercentPhone', this.value, 'percentage')">
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('isaInterestRatePercentPhone', 'isaInterestRateSlider', 0.25, 'percentage')" 
                                                    type="button" aria-label="Increase">
                                                <i class="bi bi-plus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>


                    <!-- Section: Fund Charges -->
                    <div class="accordion-item">
                        <h3 class="accordion-header" id="rightFundCharges">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#rightCollapseFundCharges" aria-expanded="false" aria-controls="rightCollapseFundCharges">
                                <i class="bi bi-gem text-primary me-3" style="font-size: 1.5rem; color: #139806 !important; "></i>
                                Fund Charges
                            </button>
                        </h3>
                        <div id="rightCollapseFundCharges" class="accordion-collapse collapse" aria-labelledby="rightFundCharges" data-bs-parent="#leftColumn">
                            <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                <form>
                                    <!-- Fund Charges -->
                                    <div class="mb-3 px-3 mt-4">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <label for="fundChargesSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Pension Fund Charges</strong></label>
                                            <output id="fundChargesPercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="1">1%</output>
                                        </div>
                                        <div class="d-flex align-items-center mt-3 me-1">
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('fundChargesPercentPhone', 'fundChargesSlider', -0.01, 'percentage')" 
                                                    type="button" aria-label="Decrease">
                                                <i class="bi bi-dash"></i>
                                            </button>
                                            <input type="range" class="form-range flex-grow-1 mx-2" id="fundChargesSlider" 
                                                min="0" max="2.5" step="0.01" value="1" 
                                                oninput="updateOutput('fundChargesPercentPhone', this.value, 'percentage')">
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('fundChargesPercentPhone', 'fundChargesSlider', 0.01, 'percentage')" 
                                                    type="button" aria-label="Increase">
                                                <i class="bi bi-plus"></i>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Stocks & Shares ISA Fund Charges -->
                                    <div class="mb-3 px-3 mt-4" id="ISAChargesContainer">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <label for="isaChargesSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Stocks & Shares ISA Charges</strong></label>
                                            <output id="isaChargesPercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="1">1%</output>
                                        </div>
                                        <div class="d-flex align-items-center mt-3 me-1">
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('isaChargesPercentPhone', 'isaChargesSlider', -0.01, 'percentage')" 
                                                    type="button" aria-label="Decrease">
                                                <i class="bi bi-dash"></i>
                                            </button>
                                            <input type="range" class="form-range flex-grow-1 mx-2" id="isaChargesSlider" 
                                                min="0" max="2.5" step="0.01" value="1" 
                                                oninput="updateOutput('isaChargesPercentPhone', this.value, 'percentage')">
                                            <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('isaChargesPercentPhone', 'isaChargesSlider', 0.01, 'percentage')" 
                                                    type="button" aria-label="Increase">
                                                <i class="bi bi-plus"></i>
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
    
                </div>
            </div>




                <h3 style="text-align: center; margin-top: 5%; margin-bottom: 3%; color: white; text-shadow: 4px 4px 20px rgba(0, 0, 0, 0.5); ">Scenarios</h3>

                
                
    
                <!-- Accordion: Features -->
                <div class="accordion mb-4" id="rightInputsAccordionScenarios">
                    <!-- Main Accordion: Sections -->
                    <div class="accordion" id="rightColumn">

                        

                        <!-- Section: Market Crash -->
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="rightMarketCrashAssumptions">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#rightCollapseMarketCrashAssumptions" aria-expanded="false" aria-controls="rightCollapseMarketCrashAssumptions">
                                    <i class="bi bi-graph-down-arrow text-primary me-3" style="font-size: 1.5rem; color: #FF0000 !important;"></i>
                                    Market Crash
                                </button>
                            </h3>
                            <div id="rightCollapseMarketCrashAssumptions" class="accordion-collapse collapse" aria-labelledby="rightMarketCrashAssumptions" data-bs-parent="#rightColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                                        <div class="mb-3 px-3">
                                        <!--  <p class="form-label" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                See the impact of a market crash just before retirement, or at any age you choose.
                                            </p> -->
                                        </div>

                                        <!-- Apply Market Crash Switch -->
                                        <div class="d-flex justify-content-between align-items-center mb-4 px-3">
                                            <label class="form-check-label me-3" style="font-size: 0.9rem;" for="applyMarketCrashSwitch">Apply Market Crash<strong></strong></label>
                                            <div class="form-check form-switch ms-auto pe-2">
                                                <input class="form-check-input" type="checkbox" id="applyMarketCrashSwitch" onchange="toggleMarketCrash(this)">
                                            </div>
                                        </div>

                                    <!-- Market Crash Age -->
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="marketCrashAgeSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Market Crash Age</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="marketCrashAgePhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="60">60</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('marketCrashAgePhone', 'marketCrashAgeSlider', -1, 'plain')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="marketCrashAgeSlider" 
                                                    min="30" max="100" step="1" value="60" 
                                                    oninput="updateOutput('marketCrashAgePhone', this.value, 'plain')">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('marketCrashAgePhone', 'marketCrashAgeSlider', 1, 'plain')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Market Crash Percent -->
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="marketCrashPercentSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"> <strong>Market Crash Percent</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="marketCrashPercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0%</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('marketCrashPercentPhone', 'marketCrashPercentSlider', -2.5, 'percentage')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="marketCrashPercentSlider" 
                                                    min="0" max="100" step="2.5" value="0" 
                                                    oninput="onMarketCrashSliderChange(this.value)">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('marketCrashPercentPhone', 'marketCrashPercentSlider', 2.5, 'percentage')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>


                        


                <h3 style="text-align: center; margin-top: 5%; margin-bottom: 3%; color: white; text-shadow: 4px 4px 20px rgba(0, 0, 0, 0.5); ">Options</h3>


                
    
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="rightIncomeSteps">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#rightCollapseIncomeSteps" aria-expanded="false" aria-controls="rightCollapseIncomeSteps">
                                    <i class="bi bi-arrow-bar-down text-primary me-3" style="font-size: 1.5rem;"></i>
                                    Income Steps
                                </button>
                            </h3>
                            <div id="rightCollapseIncomeSteps" class="accordion-collapse collapse" aria-labelledby="rightIncomeSteps" data-bs-parent="#rightColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                        
                                        <!-- Age at First Step -->
                                        <div class="mb-3 px-3 mt-4">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label for="incomeStepAge1Slider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Age at First Step</strong></label>
                                                <output id="incomeStepAge1Phone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="60">60</output>
                                            </div>
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('incomeStepAge1Phone', 'incomeStepAge1Slider', -1, 'plain')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="incomeStepAge1Slider" 
                                                    min="30" max="100" step="1" value="60" 
                                                    oninput="updateOutput('incomeStepAge1Phone', this.value, 'plain')">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('incomeStepAge1Phone', 'incomeStepAge1Slider', 1, 'plain')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                        
                                        <!--  Percentage Step at First Step -->
                                        <div class="mb-3 px-3 mt-4">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label for="incomeStepPercent1Slider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"> <strong>Percentage Step</strong></label>
                                                <output id="incomeStep1PercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0%</output>
                                            </div>
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('incomeStep1PercentPhone', 'incomeStepPercent1Slider', -2.5, 'percentage')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="incomeStepPercent1Slider" 
                                                    min="-50" max="0" step="2.5" value="0" 
                                                    oninput="updateOutput('incomeStep1PercentPhone', this.value, 'percentage')">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('incomeStep1PercentPhone', 'incomeStepPercent1Slider', 2.5, 'percentage')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                        
                                        <!--  Age at Second Step -->
                                        <div class="mb-3 px-3 mt-4">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label for="incomeStepAge2Slider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Age at Second Step</strong></label>
                                                <output id="incomeStepAge2Phone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="65">65</output>
                                            </div>
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('incomeStepAge2Phone', 'incomeStepAge2Slider', -1, 'plain')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="incomeStepAge2Slider" 
                                                    min="30" max="100" step="1" value="65" 
                                                    oninput="updateOutput('incomeStepAge2Phone', this.value, 'plain')">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('incomeStepAge2Phone', 'incomeStepAge2Slider', 1, 'plain')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                        
                                        <!--  Percentage Step at Second Step -->
                                        <div class="mb-3 px-3 mt-4">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label for="incomeStepPercent2Slider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"> <strong>Second Step Percentage</strong></label>
                                                <output id="incomeStep2PercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0%</output>
                                            </div>
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('incomeStep2PercentPhone', 'incomeStepPercent2Slider', -2.5, 'percentage')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="incomeStepPercent2Slider" 
                                                    min="-50" max="0" step="2.5" value="0" 
                                                    oninput="updateOutput('incomeStep2PercentPhone', this.value, 'percentage')">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('incomeStep2PercentPhone', 'incomeStepPercent2Slider', 2.5, 'percentage')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <div class="d-grid gap-2 mt-4 px-3">
                                            <button id="resetIncomeStepsButton" type="button" class="btn btn-lg" style="font-size: medium;background-color:#4CAF50; color:white; border: none; ">
                                                Reset Income Steps
                                            </button>
                                        </div>
                        
                                    </form>
                                </div>
                            </div>
                        </div>
                        

                        

                        <div class="accordion-item">
                            <h3 class="accordion-header" id="rightFundConstraints">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#rightCollapseFundConstraints" aria-expanded="false" aria-controls="rightCollapseFundConstraints">
                                    <i class="bi bi-lock text-primary me-3" style="font-size: 1.5rem;"></i>
                                    Fund Constraints
                                </button>
                            </h3>
                            <div id="rightCollapseFundConstraints" class="accordion-collapse collapse" aria-labelledby="rightFundConstraints" data-bs-parent="#rightColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                                        
                                        <!-- Minimum ISA Balance -->
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Instruction Text -->
                                            <p class="form-label" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                You may wish to maintain a minimum balance cushion in your ISA throughout your retirement. 
                                            </p>

                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="minimumISABalanceSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Minimum ISA Balance (Â£)</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="minimumISABalancePhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="10000">Â£10,000</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('minimumISABalancePhone', 'minimumISABalanceSlider', -500, 'currency')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="minimumISABalanceSlider" 
                                                    min="0" max="50000" step="500" value="10000" 
                                                    oninput="updateOutput('minimumISABalancePhone', this.value, 'currency')">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('minimumISABalancePhone', 'minimumISABalanceSlider', 500, 'currency')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                        
                                        <div class="mb-3 px-3 hidden">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="finalFundTargetSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Final Fund Target</strong></label>
                                                <!-- Output Box -->
                                                <output id="finalFundTargetPhone" class="form-control text-end" style="max-width: 35%; font-size: 0.9rem; overflow: hidden;">0</output>
                                            </div>
                                            <!-- Slider -->
                                            <input type="range" class="form-range mt-3" id="finalFundTargetSlider" min="0" max="500000" step="5000" value="250000" oninput="updateOutput('finalFundTargetPhone', this.value)" style="padding: 10px 0; border-color: #2b2b2b;">
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>

                        
                        
                        


                        <div class="accordion-item">
                            <h3 class="accordion-header" id="rightContributionIncrease">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#rightCollapseContributionIncrease" aria-expanded="false" aria-controls="rightCollapseContributionIncrease">
                                    
                                    <i class="bi bi-bar-chart-line text-primary me-3" style="font-size: 1.5rem;"></i>
                                    Future Pension Contribution Increases
                                </button>
                            </h3>
                            <div id="rightCollapseContributionIncrease" class="accordion-collapse collapse" aria-labelledby="rightContributionIncrease" data-bs-parent="#rightColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                                        
                                       <!-- Contribution Increase Age -->
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Instruction Text -->
                                            <p class="form-label" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                You may wish to increase your pension contributions in the future, for example after paying off a mortgage. 
                                            </p>

                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="contributionIncreaseAgeSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Contribution Increase Age</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="contributionIncreaseAgePhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="55">55</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('contributionIncreaseAgePhone', 'contributionIncreaseAgeSlider', -1, 'plain')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="contributionIncreaseAgeSlider" 
                                                    min="40" max="70" step="1" value="55" 
                                                    oninput="updateOutput('contributionIncreaseAgePhone', this.value, 'plain')">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('contributionIncreaseAgePhone', 'contributionIncreaseAgeSlider', 1, 'plain')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Additional Contribution -->
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="additionalContributionSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Additional Contribution (Â£/month)</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="additionalContributionPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">Â£0</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('additionalContributionPhone', 'additionalContributionSlider', -10, 'currency')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="additionalContributionSlider" 
                                                    min="0" max="500" step="10" value="0" 
                                                    
                                                    oninput="onAdditionalContributionSliderChange(this.value)">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('additionalContributionPhone', 'additionalContributionSlider', 10, 'currency')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                        
                                    </form>
                                </div>
                            </div>
                        </div>

                        
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="rightISAContributionIncrease">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#rightCollapseISAContributionIncrease" aria-expanded="false" aria-controls="rightCollapseISAContributionIncrease">
                                    <i class="bi bi-piggy-bank text-primary me-3" style="font-size: 1.5rem;"></i>
                                    Future ISA Contribution Increases
                                </button>
                            </h3>
                            <div id="rightCollapseISAContributionIncrease" class="accordion-collapse collapse" aria-labelledby="rightISAContributionIncrease" data-bs-parent="#rightColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                                        <!-- ISA Contribution Increase Age -->
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Instruction Text -->
                                            <p class="form-label" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                You may wish to increase your ISA contributions in the future, for example after receiving a pay rise or finishing other financial commitments. 
                                            </p>
                        
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="ISAContributionIncreaseAgeSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Contribution Increase Age</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="ISAContributionIncreaseAgePhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="55">55</output>
                                            </div>
                        
                                            
                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('ISAContributionIncreaseAgePhone', 'ISAContributionIncreaseAgeSlider', -1, 'plain')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="ISAContributionIncreaseAgeSlider" 
                                                    min="40" max="70" step="1" value="55" 
                                                    oninput="updateOutput('ISAContributionIncreaseAgePhone', this.value, 'plain')">
                        
                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('ISAContributionIncreaseAgePhone', 'ISAContributionIncreaseAgeSlider', 1, 'plain')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                        
                                        <!-- Additional ISA Contribution -->
                                        <div class="mb-3 px-3 mt-4">
                                            <p class="form-label" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                The amount to increase by should be specified in today's money terms.
                                            </p>
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="additionalISAContributionSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Additional Monthly Contribution</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="additionalISAContributionPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0"></output>
                                            </div>
                        
                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('additionalISAContributionPhone', 'additionalISAContributionSlider', -10, 'currency')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="additionalISAContributionSlider" 
                                                    min="0" max="1667" step="10" value="0" 
                                                    oninput="updateOutput('additionalISAContributionPhone', this.value, 'currency')">
                        
                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('additionalISAContributionPhone', 'additionalISAContributionSlider', 10, 'currency')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        

                        
                        <!-- Section: Defined Benefit Options -->
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="earlyRetirementContainer">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#rightCollapseDefinedBenefitOptions" aria-expanded="false" aria-controls="rightCollapseDefinedBenefitOptions">
                                    <i class="bi bi-envelope-check text-primary me-3" style="font-size: 1.5rem;"></i>
                                    Early Retirement
                                </button>
                            </h3>
                            <div id="rightCollapseDefinedBenefitOptions" class="accordion-collapse collapse" aria-labelledby="earlyRetirementContainer" data-bs-parent="#rightColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                                        
                                        <p class="form-label px-3 mt-3" style="font-size: 0.9rem; ">
                                            Select an age to start receiving income early from your defined benefit pension. 
                                            
                                        </p>

                                        <!-- Early Retirement Age -->
                                        <div class="mb-3 px-3 mt-4">
                                            <!-- Label and Output Row -->
                                            <div class="d-flex justify-content-between align-items-center">
                                                <!-- Label -->
                                                <label for="earlyRetirementAgeSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Early Retirement Age</strong></label>
                                                
                                                <!-- Output Box -->
                                                <output id="earlyRetirementAgePhone" class="form-control text-end" style="max-width: 25%; min-width: 50px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="65">65</output>
                                            </div>

                                            <!-- Slider and Adjustment Buttons Row -->
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <!-- Minus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('earlyRetirementAgePhone', 'earlyRetirementAgeSlider', -1, 'plain')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <!-- Slider -->
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="earlyRetirementAgeSlider" 
                                                    min="50" max="75" step="1" value="65" 
                                                    oninput="updateOutput('earlyRetirementAgePhone', this.value, 'plain')">

                                                <!-- Plus Button -->
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('earlyRetirementAgePhone', 'earlyRetirementAgeSlider', 1, 'plain')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <div class="mb-4 px-3 mt-4">
                                            <div class="d-flex justify-content-between align-items-center">
                                            <div id="definedBenefitPensionAmountLabel" class="result-label" style="font-size: 0.9rem; width: 75% "><strong>Defined Benefit Pension Amount</strong></div>
                                            <div id="definedBenefitPensionAmount" style="color: #2ab811; width: 25%; min-width: 100px; " class="result-output"></div>
                                        </div>
                                        </div>

                                        <p class="form-label px-3 mt-3" style="font-size: 0.9rem; ">
                                            The early retirement reduction factors can be adjusted to reflect your scheme's rules in the <a href="inputs.html#earlyRetirementAssumptionsContainer">assumptions section</a> at the end of the Inputs page.
                                            
                                        </p>
                                        
                                    </form>
                                </div>
                            </div>
                        </div>

                        <!-- Withdrawal Strategy Accordion -->
                        <div class="accordion-item" id="withdrawalStrategySection">
                            <h3 class="accordion-header" id="rightWithdrawalStrategy">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#rightCollapseWithdrawalStrategy" aria-expanded="false" aria-controls="rightCollapseWithdrawalStrategy">
                                    <i class="bi bi-binoculars text-primary me-3" style="font-size: 1.5rem;"></i>
                                    Withdrawal Strategy
                                </button>
                            </h3>
                            <div id="rightCollapseWithdrawalStrategy" class="accordion-collapse collapse" aria-labelledby="rightWithdrawalStrategy" data-bs-parent="#rightColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>
                        
                                        <div class="mb-3 px-3 mt-4">
                                            <p class="result-label" id="withdrawalStrategyIntroduction" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                Using ISA withdrawals to avoid paying higher rate tax can reduce your overall future tax bill. Use the slider below to set the percentage of the basic rate band to fill up with payments from your pension fund.
                                            </p>
                                        </div>
                                        
                        
                                        
                                        <div class="mb-3 px-3 mt-4">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label for="pensionPercentageSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;">
                                                    
                                                <strong>% Use of Basic Rate Tax Band</strong></label>
                                                <output id="pensionPercentPhone" class="form-control text-end" style="max-width: 25%; min-width: 50px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="50">50</output>
                                            </div>
                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('pensionPercentPhone', 'pensionPercentageSlider', -1, 'percentage')" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="pensionPercentageSlider" 
                                                    min="0" max="100" step="1" value="50" 
                                                    oninput="updateOutput('pensionPercentPhone', this.value, 'percentage')">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('pensionPercentPhone', 'pensionPercentageSlider', 1, 'percentage')" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <div class="mb-3 px-3 mt-4">
                                            <p class="result-label"style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                Note that once your pension fund or ISA runs out, all income will automatically flow from the other fund. 
                                            </p>
                                        </div>

                                        

                                    </form>
                                </div>
                            </div>
                        </div>



                        <!-- Annuity Purchase Accordion -->
                        <div class="accordion-item">
                            <h3 class="accordion-header" id="annuityPurchaseAccordion">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#leftCollapseAnnuityPurchase" aria-expanded="false" aria-controls="leftCollapseAnnuityPurchase">
                                    <i class="bi bi-shield-lock text-primary me-3" style="font-size: 1.5rem;"></i>
                                    Annuity Purchase
                                </button>
                            </h3>
                            <div id="leftCollapseAnnuityPurchase" class="accordion-collapse collapse" aria-labelledby="annuityPurchaseAccordion" data-bs-parent="#rightColumn">
                                <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                    <form>

                                        

                                        <!-- Age at Annuity Purchase -->
                                        <div class="mb-3 px-3 ">

                                            <p class="form-label" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                Lock in guaranteed income by converting some (or all) of your pension fund into an annuity. 
                                            </p>

                                        </div>

                                        <div class="mb-3 px-3 mt-4">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label for="annuityAgeSlider" class="form-label mb-0 " style="max-width: 60%; font-size: 0.9rem;">
                                                    
                                                <strong>Age at Annuity Purchase</strong></label>
                                                
                                                <output id="annuityAgePhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="65">65</output>
                                            </div>

                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('annuityAgePhone', 'annuityAgeSlider', -1)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="annuityAgeSlider" 
                                                    min="50" max="85" step="1" value="65" 
                                                    oninput="updateOutput('annuityAgePhone', this.value)">

                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('annuityAgePhone', 'annuityAgeSlider', 1)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Percentage of Fund to Convert -->
                                        <div class="mb-3 px-3 mt-4">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <label for="fundConversionSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;">
                                                    
                                                <strong>Percentage of Fund to Convert</strong></label>
                                                
                                                <output id="fundConversionPercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0%</output>
                                            </div>

                                            <div class="d-flex align-items-center mt-3 me-1">
                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                    onclick="adjustOutputBox2('fundConversionPercentPhone', 'fundConversionSlider', -1)" 
                                                    type="button" aria-label="Decrease">
                                                    <i class="bi bi-dash"></i>
                                                </button>
                                                
                                                <input type="range" class="form-range flex-grow-1 mx-2" id="fundConversionSlider" 
                                                    min="0" max="100" step="1" value="0" 
                                                    oninput="updateOutput('fundConversionPercentPhone', this.value, 'percentage')">

                                                <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                    onclick="adjustOutputBox2('fundConversionPercentPhone', 'fundConversionSlider', 1)" 
                                                    type="button" aria-label="Increase">
                                                    <i class="bi bi-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <div class="mb-3 px-3 mt-4">

                                            <p class="result-label" id="annuityExplainer" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                
                                            </p>

                                        </div>

                                    </form>
                                </div>
                            </div>
                        </div>


                        

                        


                        <h3 class="hidden" id="partnersParametersHeading" style="text-align: center; margin-top: 5%; margin-bottom: 3%; color: white; text-shadow: 4px 4px 20px rgba(0, 0, 0, 0.5); ">Your Partner's Options</h3>
    
                        

                                <div class="accordion-item hidden" id="partnerIncomeStepsContainer">
                                    <h3 class="accordion-header" id="rightPartnerIncomeSteps">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#rightCollapsePartnerIncomeSteps" aria-expanded="false" aria-controls="rightCollapsePartnerIncomeSteps">
                                            <i class="bi bi-arrow-bar-down text-primary me-3" style="font-size: 1.5rem; color: purple !important;"></i>
                                            Income Steps
                                        </button>
                                    </h3>
                                    <div id="rightCollapsePartnerIncomeSteps" class="accordion-collapse collapse" aria-labelledby="rightPartnerIncomeSteps" data-bs-parent="#rightColumn">
                                        <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                            <form>
                                
                                                <!-- Partner Age at First Step -->
                                                <div class="mb-3 px-3 mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label for="partnerIncomeStepAge1Slider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Age at First Step</strong></label>
                                                        <output id="partnerIncomeStepAge1Phone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="60">60</output>
                                                    </div>
                                                    <div class="d-flex align-items-center mt-3 me-1">
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                            onclick="adjustOutputBox2('partnerIncomeStepAge1Phone', 'partnerIncomeStepAge1Slider', -1, 'plain')" 
                                                            type="button" aria-label="Decrease">
                                                            <i class="bi bi-dash"></i>
                                                        </button>
                                                        <input type="range" class="form-range flex-grow-1 mx-2" id="partnerIncomeStepAge1Slider" 
                                                            min="30" max="100" step="1" value="60" 
                                                            oninput="updateOutput('partnerIncomeStepAge1Phone', this.value, 'plain')">
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                            onclick="adjustOutputBox2('partnerIncomeStepAge1Phone', 'partnerIncomeStepAge1Slider', 1, 'plain')" 
                                                            type="button" aria-label="Increase">
                                                            <i class="bi bi-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                
                                                <!-- Partner Percentage Step at First Step -->
                                                <div class="mb-3 px-3 mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label for="partnerIncomeStepPercent1Slider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"> <strong>Percentage Step</strong></label>
                                                        <output id="partnerIncomeStep1PercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0%</output>
                                                    </div>
                                                    <div class="d-flex align-items-center mt-3 me-1">
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                            onclick="adjustOutputBox2('partnerIncomeStep1PercentPhone', 'partnerIncomeStepPercent1Slider', -2.5, 'percentage')" 
                                                            type="button" aria-label="Decrease">
                                                            <i class="bi bi-dash"></i>
                                                        </button>
                                                        <input type="range" class="form-range flex-grow-1 mx-2" id="partnerIncomeStepPercent1Slider" 
                                                            min="-50" max="50" step="2.5" value="0" 
                                                            oninput="updateOutput('partnerIncomeStep1PercentPhone', this.value, 'percentage')">
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                            onclick="adjustOutputBox2('partnerIncomeStep1PercentPhone', 'partnerIncomeStepPercent1Slider', 2.5, 'percentage')" 
                                                            type="button" aria-label="Increase">
                                                            <i class="bi bi-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                
                                                <!-- Partner Age at Second Step -->
                                                <div class="mb-3 px-3 mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label for="partnerIncomeStepAge2Slider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Age at Second Step</strong></label>
                                                        <output id="partnerIncomeStepAge2Phone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="65">65</output>
                                                    </div>
                                                    <div class="d-flex align-items-center mt-3 me-1">
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                            onclick="adjustOutputBox2('partnerIncomeStepAge2Phone', 'partnerIncomeStepAge2Slider', -1, 'plain')" 
                                                            type="button" aria-label="Decrease">
                                                            <i class="bi bi-dash"></i>
                                                        </button>
                                                        <input type="range" class="form-range flex-grow-1 mx-2" id="partnerIncomeStepAge2Slider" 
                                                            min="30" max="100" step="1" value="65" 
                                                            oninput="updateOutput('partnerIncomeStepAge2Phone', this.value, 'plain')">
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                            onclick="adjustOutputBox2('partnerIncomeStepAge2Phone', 'partnerIncomeStepAge2Slider', 1, 'plain')" 
                                                            type="button" aria-label="Increase">
                                                            <i class="bi bi-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                
                                                <!-- Partner Percentage Step at Second Step -->
                                                <div class="mb-3 px-3 mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label for="partnerIncomeStepPercent2Slider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"> <strong>Second Step Percentage</strong></label>
                                                        <output id="partnerIncomeStep2PercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0%</output>
                                                    </div>
                                                    <div class="d-flex align-items-center mt-3 me-1">
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                            onclick="adjustOutputBox2('partnerIncomeStep2PercentPhone', 'partnerIncomeStepPercent2Slider', -2.5, 'percentage')" 
                                                            type="button" aria-label="Decrease">
                                                            <i class="bi bi-dash"></i>
                                                        </button>
                                                        <input type="range" class="form-range flex-grow-1 mx-2" id="partnerIncomeStepPercent2Slider" 
                                                            min="-50" max="50" step="2.5" value="0" 
                                                            oninput="updateOutput('partnerIncomeStep2PercentPhone', this.value, 'percentage')">
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                            onclick="adjustOutputBox2('partnerIncomeStep2PercentPhone', 'partnerIncomeStepPercent2Slider', 2.5, 'percentage')" 
                                                            type="button" aria-label="Increase">
                                                            <i class="bi bi-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>

                                                <div class="d-grid gap-2 mt-4 px-3">
                                                    <button id="resetPartnerIncomeStepsButton" type="button" class="btn btn-lg" style="font-size: medium;background-color:#4CAF50; color:white; border: none; ">
                                                        Reset Income Steps
                                                    </button>
                                                </div>
                                
                                            </form>
                                        </div>
                                    </div>
                                </div>

                                <div class="accordion-item">
                                    <h3 class="accordion-header" id="partnerRightFundConstraints">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#partnerRightCollapseFundConstraints" aria-expanded="false" aria-controls="partnerRightCollapseFundConstraints">
                                            <i class="bi bi-lock text-primary me-3" style="font-size: 1.5rem; color: purple !important;"></i>
                                            Fund Constraints
                                        </button>
                                    </h3>
                                    <div id="partnerRightCollapseFundConstraints" class="accordion-collapse collapse" aria-labelledby="partnerRightFundConstraints" data-bs-parent="#rightColumn">
                                        <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                            <form>
                                                <!-- Minimum ISA Balance -->
                                                <div class="mb-3 px-3 mt-4">
                                                    <!-- Instruction Text -->
                                                    <p class="form-label" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                        You partner may wish to maintain a minimum balance cushion in their ISA throughout retirement. 
                                                    </p>
                                                    
                                                    <!-- Label and Output Row -->
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <!-- Label -->
                                                        <label for="partnerMinimumISABalanceSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Partner's Minimum ISA Balance (Â£)</strong></label>
                                                        
                                                        <!-- Output Box -->
                                                        <output id="partnerMinimumISABalancePhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="10000">Â£10,000</output>
                                                    </div>
                                                    
                                                    <!-- Slider and Adjustment Buttons Row -->
                                                    <div class="d-flex align-items-center mt-3 me-1">
                                                        <!-- Minus Button -->
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                            onclick="adjustOutputBox2('partnerMinimumISABalancePhone', 'partnerMinimumISABalanceSlider', -500, 'currency')" 
                                                            type="button" aria-label="Decrease">
                                                            <i class="bi bi-dash"></i>
                                                        </button>
                                                        
                                                        <!-- Slider -->
                                                        <input type="range" class="form-range flex-grow-1 mx-2" id="partnerMinimumISABalanceSlider" 
                                                            min="0" max="50000" step="500" value="10000" 
                                                            oninput="updateOutput('partnerMinimumISABalancePhone', this.value, 'currency')">
                                                        
                                                        <!-- Plus Button -->
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                            onclick="adjustOutputBox2('partnerMinimumISABalancePhone', 'partnerMinimumISABalanceSlider', 500, 'currency')" 
                                                            type="button" aria-label="Increase">
                                                            <i class="bi bi-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                
                                                <div class="mb-3 px-3 hidden">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <!-- Label -->
                                                        <label for="partnerFinalFundTargetSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Final Fund Target</strong></label>
                                                        <!-- Output Box -->
                                                        <output id="partnerFinalFundTargetPhone" class="form-control text-end" style="max-width: 35%; font-size: 0.9rem; overflow: hidden;">0</output>
                                                    </div>
                                                    <!-- Slider -->
                                                    <input type="range" class="form-range mt-3" id="partnerFinalFundTargetSlider" min="0" max="500000" step="5000" value="250000" oninput="updateOutput('partnerFinalFundTargetPhone', this.value)" style="padding: 10px 0; border-color: #2b2b2b;">
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>


                                <!-- Partner's Additional Contribution-->
                                <div class="accordion-item">
                                    <h3 class="accordion-header" id="partnerContributionIncreaseInputsAccordion">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#rightCollapsePartnerContributionIncrease" aria-expanded="false" aria-controls="rightCollapsePartnerContributionIncrease">
                                            <i class="bi bi-bar-chart-line text-primary me-3" style="font-size: 1.5rem; color: purple !important;"></i>
                                            Future Pension Contribution Increases
                                        </button>
                                    </h3>
                                    <div id="rightCollapsePartnerContributionIncrease" class="accordion-collapse collapse" aria-labelledby="partnerContributionIncreaseInputsAccordion" data-bs-parent="#rightColumn">
                                        <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                            <form>
                                                <!-- Partner's Contribution Increase Age -->
                                                <div class="mb-3 px-3 mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label for="partnerContributionIncreaseAgeSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Age to Increase Contributions</strong></label>
                                                        <output id="partnerContributionIncreaseAgePhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="55">55</output>
                                                    </div>
                                
                                                    <div class="d-flex align-items-center mt-3 me-1">
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" onclick="adjustOutputBox2('partnerContributionIncreaseAgePhone', 'partnerContributionIncreaseAgeSlider', -1)" type="button" aria-label="Decrease">
                                                            <i class="bi bi-dash"></i>
                                                        </button>
                                
                                                        <input type="range" class="form-range flex-grow-1 mx-2" id="partnerContributionIncreaseAgeSlider" min="18" max="75" step="1" value="50" oninput="updateOutput('partnerContributionIncreaseAgePhone', this.value)">
                                
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" onclick="adjustOutputBox2('partnerContributionIncreaseAgePhone', 'partnerContributionIncreaseAgeSlider', 1)" type="button" aria-label="Increase">
                                                            <i class="bi bi-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                
                                                <!-- Partner's Increase Amount -->
                                                <div class="mb-3 px-3 mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label for="partnerAdditionalContributionSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Increase Amount (Â£)</strong></label>
                                                        <output id="partnerAdditionalContributionPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">Â£0</output>
                                                    </div>
                                
                                                    <div class="d-flex align-items-center mt-3 me-1">
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" onclick="adjustOutputBox2('partnerAdditionalContributionPhone', 'partnerAdditionalContributionSlider', -10, 'currency')" type="button" aria-label="Decrease">
                                                            <i class="bi bi-dash"></i>
                                                        </button>
                                
                                                        <input type="range" class="form-range flex-grow-1 mx-2" id="partnerAdditionalContributionSlider" min="0" max="2000" step="10" value="0" oninput="updateOutput('partnerAdditionalContributionPhone', this.value, 'currency')">
                                
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" onclick="adjustOutputBox2('partnerAdditionalContributionPhone', 'partnerAdditionalContributionSlider', 10, 'currency')" type="button" aria-label="Increase">
                                                            <i class="bi bi-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                
                                            
                                            </form>
                                        </div>
                                    </div>
                                </div>

                                <div class="accordion-item">
                                    <h3 class="accordion-header hidden" id="partnerISAContributionIncrease">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#partnerCollapseISAContributionIncrease" aria-expanded="false" aria-controls="partnerCollapseISAContributionIncrease">
                                            <i class="bi bi-piggy-bank text-primary me-3" style="font-size: 1.5rem; color: purple !important;"></i>
                                            Future ISA Contribution Increases
                                        </button>
                                    </h3>
                                    <div id="partnerCollapseISAContributionIncrease" class="accordion-collapse collapse" aria-labelledby="partnerISAContributionIncrease" data-bs-parent="#rightColumn">
                                        <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                            <form>
                                                <!-- Partner's ISA Contribution Increase Age -->
                                                <div class="mb-3 px-3 mt-4">
                                                    <!-- Instruction Text -->
                                                    <p class="form-label" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                        You may wish for your partner to increase their ISA contributions in the future, for example after settling other financial commitments.
                                                    </p>
                                
                                                    <!-- Label and Output Row -->
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <!-- Label -->
                                                        <label for="partnerISAContributionIncreaseAgeSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Contribution Increase Age</strong></label>
                                                        
                                                        <!-- Output Box -->
                                                        <output id="partnerISAContributionIncreaseAgePhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="55">55</output>
                                                    </div>
                                
                                                    <!-- Slider and Adjustment Buttons Row -->
                                                    <div class="d-flex align-items-center mt-3 me-1">
                                                        <!-- Minus Button -->
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                            onclick="adjustOutputBox2('partnerISAContributionIncreaseAgePhone', 'partnerISAContributionIncreaseAgeSlider', -1, 'plain')" 
                                                            type="button" aria-label="Decrease">
                                                            <i class="bi bi-dash"></i>
                                                        </button>
                                                        
                                                        <!-- Slider -->
                                                        <input type="range" class="form-range flex-grow-1 mx-2" id="partnerISAContributionIncreaseAgeSlider" 
                                                            min="40" max="70" step="1" value="55" 
                                                            oninput="updateOutput('partnerISAContributionIncreaseAgePhone', this.value, 'plain')">
                                
                                                        <!-- Plus Button -->
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                            onclick="adjustOutputBox2('partnerISAContributionIncreaseAgePhone', 'partnerISAContributionIncreaseAgeSlider', 1, 'plain')" 
                                                            type="button" aria-label="Increase">
                                                            <i class="bi bi-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                
                                                <!-- Partner's Additional ISA Contribution -->
                                                <div class="mb-3 px-3 mt-4">
                                                    <p class="form-label" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                        The amount to increase by should be specified in today's money terms.
                                                    </p>
                                                    <!-- Label and Output Row -->
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <!-- Label -->
                                                        <label for="partnerAdditionalISAContributionSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Additional Contribution (Â£/month)</strong></label>
                                                        
                                                        <!-- Output Box -->
                                                        <output id="partnerAdditionalISAContributionPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">Â£0</output>
                                                    </div>
                                
                                                    <!-- Slider and Adjustment Buttons Row -->
                                                    <div class="d-flex align-items-center mt-3 me-1">
                                                        <!-- Minus Button -->
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                            onclick="adjustOutputBox2('partnerAdditionalISAContributionPhone', 'partnerAdditionalISAContributionSlider', -10, 'currency')" 
                                                            type="button" aria-label="Decrease">
                                                            <i class="bi bi-dash"></i>
                                                        </button>
                                                        
                                                        <!-- Slider -->
                                                        <input type="range" class="form-range flex-grow-1 mx-2" id="partnerAdditionalISAContributionSlider" 
                                                            min="0" max="1667" step="10" value="0" 
                                                            oninput="updateOutput('partnerAdditionalISAContributionPhone', this.value, 'currency')">
                                
                                                        <!-- Plus Button -->
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                            onclick="adjustOutputBox2('partnerAdditionalISAContributionPhone', 'partnerAdditionalISAContributionSlider', 10, 'currency')" 
                                                            type="button" aria-label="Increase">
                                                            <i class="bi bi-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>


                                <!-- Section: Partner's Defined Benefit Options -->
                                <div class="accordion-item" id="partnerEarlyRetirementContainer">
                                    <h3 class="accordion-header" id="rightPartnerDefinedBenefitOptions">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#rightCollapsePartnerDefinedBenefitOptions" aria-expanded="false" aria-controls="rightCollapsePartnerDefinedBenefitOptions">
                                            <i class="bi bi-envelope-check text-primary me-3" style="font-size: 1.5rem; color: purple !important;"></i>
                                            Defined Benefit Early Retirement
                                        </button>
                                    </h3>
                                    <div id="rightCollapsePartnerDefinedBenefitOptions" class="accordion-collapse collapse" aria-labelledby="rightPartnerDefinedBenefitOptions" data-bs-parent="#rightColumn">
                                        <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                            <form>
    
                                                <p class="form-label px-3 mt-3" style="font-size: 0.9rem; ">
                                                    Select an age to start receiving income early from your defined benefit pension. 
                                                    
                                                </p>

                                                <!-- Partner's Early Retirement Age -->
                                                <div class="mb-3 px-3 mt-4">
                                                    <!-- Label and Output Row -->
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <!-- Label -->
                                                        <label for="partnerEarlyRetirementAgeSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;"><strong>Early Retirement Age</strong></label>
                                                        
                                                        <!-- Output Box -->
                                                        <output id="partnerEarlyRetirementAgePhone" class="form-control text-end" style="max-width: 25%; min-width: 50px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="65">65</output>
                                                    </div>

                                                    <!-- Slider and Adjustment Buttons Row -->
                                                    <div class="d-flex align-items-center mt-3 me-1">
                                                        <!-- Minus Button -->
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                            onclick="adjustOutputBox2('partnerEarlyRetirementAgePhone', 'partnerEarlyRetirementAgeSlider', -1, 'plain')" 
                                                            type="button" aria-label="Decrease">
                                                            <i class="bi bi-dash"></i>
                                                        </button>
                                                        
                                                        <!-- Slider -->
                                                        <input type="range" class="form-range flex-grow-1 mx-2" id="partnerEarlyRetirementAgeSlider" 
                                                            min="50" max="75" step="1" value="65" 
                                                            oninput="updateOutput('partnerEarlyRetirementAgePhone', this.value, 'plain')">

                                                        <!-- Plus Button -->
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                            onclick="adjustOutputBox2('partnerEarlyRetirementAgePhone', 'partnerEarlyRetirementAgeSlider', 1, 'plain')" 
                                                            type="button" aria-label="Increase">
                                                            <i class="bi bi-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                
                                                <!-- Partner's Defined Benefit Pension Amount -->
                                                <div class="mb-3 px-3 mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <div id="partnerDefinedBenefitPensionAmountLabel" class="result-label" style="font-size: 0.9rem; width: 75%;">
                                                            <strong>Defined Benefit Pension Amount</strong>
                                                        </div>
                                                        <div id="partnerDefinedBenefitPensionAmount" style="color: #2ab811; width: 25%; min-width: 100px;" class="result-output"></div>
                                                    </div>
                                                </div>

                                                <p class="form-label px-3 mt-3" style="font-size: 0.9rem; ">
                                                    The early retirement reduction factors can be adjusted to reflect your scheme's rules in the <a href="inputs.html#earlyRetirementAssumptionsContainer">assumptions section</a> at the end of the Inputs page.
                                                    
                                                </p>
                                                
                                            </form>
                                        </div>
                                    </div>
                                </div>

                            <!-- Partner's Withdrawal Strategy -->
                                <div class="accordion-item" id="partnerWithdrawalStrategySection">
                                    <h3 class="accordion-header" id="partnerRightWithdrawalStrategy">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#partnerRightCollapseWithdrawalStrategy" aria-expanded="false" aria-controls="partnerRightCollapseWithdrawalStrategy">
                                            <i class="bi bi-binoculars text-primary me-3" style="font-size: 1.5rem; color: purple !important;"></i>
                                            Withdrawal Strategy
                                        </button>
                                    </h3>
                                    <div id="partnerRightCollapseWithdrawalStrategy" class="accordion-collapse collapse" aria-labelledby="partnerRightWithdrawalStrategy" data-bs-parent="#rightColumn">
                                        <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                            <form>
                                
                                                <div class="mb-3 px-3 mt-4">
                                                    <p class="result-label" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                        Using ISA withdrawals to avoid paying higher rate tax can reduce your partner's overall future tax bill. Use the slider below to set the percentage of the basic rate band to fill up with payments from your partner's pension fund.
                                                    </p>
                                                </div>

                                                <div class="mb-3 px-3 mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label for="partnerPensionPercentageSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;">
                                                            
                                                        <strong>% Use of Basic Rate Tax Band </strong></label>
                                                        <output id="partnerPensionPercentPhone" class="form-control text-end" style="max-width: 25%; min-width: 50px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="50">50</output>
                                                    </div>
                                                    <div class="d-flex align-items-center mt-3 me-1">
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                            onclick="adjustOutputBox2('partnerPensionPercentPhone', 'partnerPensionPercentageSlider', -1, 'percentage')" 
                                                            type="button" aria-label="Decrease">
                                                            <i class="bi bi-dash"></i>
                                                        </button>
                                                        <input type="range" class="form-range flex-grow-1 mx-2" id="partnerPensionPercentageSlider" 
                                                            min="0" max="100" step="1" value="50" 
                                                            oninput="updateOutput('partnerPensionPercentPhone', this.value, 'percentage')">
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                            onclick="adjustOutputBox2('partnerPensionPercentPhone', 'partnerPensionPercentageSlider', 1, 'percentage')" 
                                                            type="button" aria-label="Increase">
                                                            <i class="bi bi-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                
                                                <!-- <div class="mb-3 px-3 mt-4">
                                                    <p class="result-label"style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                        Use this additional slider to add a fixed amount of pension that to withdraw, before the above split is calculated. 
                                                    </p>
                                                </div> -->

                                                

                                               
                                
                                            </form>
                                        </div>
                                    </div>
                                </div>



                                <!-- Your Partner's Annuity Purchase Accordion -->
                                <div class="accordion-item">
                                    <h3 class="accordion-header" id="partnerAnnuityPurchaseAccordion">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#partnerLeftCollapseAnnuityPurchase" aria-expanded="false" aria-controls="partnerLeftCollapseAnnuityPurchase">
                                            <i class="bi bi-shield-lock text-primary me-3" style="font-size: 1.5rem; color: purple !important;"></i>
                                            Annuity Purchase
                                        </button>
                                    </h3>
                                    <div id="partnerLeftCollapseAnnuityPurchase" class="accordion-collapse collapse" aria-labelledby="partnerAnnuityPurchaseAccordion" data-bs-parent="#rightColumn">
                                        <div class="accordion-body" style="border: 1px solid black; background-color: #bbbbbb;">
                                            <form>

                                                <!-- Age at Annuity Purchase -->
                                                <div class="mb-3 px-3 ">
                                                    <p class="form-label" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                        Lock in guaranteed income for your partner by converting some (or all) of their pension fund into an annuity. 
                                                    </p>
                                                </div>

                                                <div class="mb-3 px-3 mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label for="partnerAnnuityAgeSlider" class="form-label mb-0 " style="max-width: 60%; font-size: 0.9rem;">
                                                            
                                                        <strong>Age at Annuity Purchase</strong></label>
                                                        
                                                        <output id="partnerAnnuityAgePhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="65">65</output>
                                                    </div>

                                                    <div class="d-flex align-items-center mt-3 me-1">
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                            onclick="adjustOutputBox2('partnerAnnuityAgePhone', 'partnerAnnuityAgeSlider', -1)" 
                                                            type="button" aria-label="Decrease">
                                                            <i class="bi bi-dash"></i>
                                                        </button>
                                                        
                                                        <input type="range" class="form-range flex-grow-1 mx-2" id="partnerAnnuityAgeSlider" 
                                                            min="50" max="85" step="1" value="65" 
                                                            oninput="updateOutput('partnerAnnuityAgePhone', this.value)">

                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                            onclick="adjustOutputBox2('partnerAnnuityAgePhone', 'partnerAnnuityAgeSlider', 1)" 
                                                            type="button" aria-label="Increase">
                                                            <i class="bi bi-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>

                                                <!-- Percentage of Fund to Convert -->
                                                <div class="mb-3 px-3 mt-4">
                                                    <div class="d-flex justify-content-between align-items-center">
                                                        <label for="partnerFundConversionSlider" class="form-label mb-0" style="max-width: 60%; font-size: 0.9rem;">
                                                            
                                                        <strong>Percentage of Fund to Convert</strong></label>
                                                        
                                                        <output id="partnerFundConversionPercentPhone" class="form-control text-end" style="max-width: 35%; min-width: 100px; font-weight: bold; color: #4CAF50; font-size: 0.9rem; overflow: hidden;" data-raw-value="0">0%</output>
                                                    </div>

                                                    <div class="d-flex align-items-center mt-3 me-1">
                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button me-2" 
                                                            onclick="adjustOutputBox2('partnerFundConversionPercentPhone', 'partnerFundConversionSlider', -1)" 
                                                            type="button" aria-label="Decrease">
                                                            <i class="bi bi-dash"></i>
                                                        </button>
                                                        
                                                        <input type="range" class="form-range flex-grow-1 mx-2" id="partnerFundConversionSlider" 
                                                            min="0" max="100" step="1" value="0" 
                                                            oninput="updateOutput('partnerFundConversionPercentPhone', this.value, 'percentage')">

                                                        <button class="btn btn-outline-secondary btn-sm rounded-circle custom-circle-button ms-2" 
                                                            onclick="adjustOutputBox2('partnerFundConversionPercentPhone', 'partnerFundConversionSlider', 1)" 
                                                            type="button" aria-label="Increase">
                                                            <i class="bi bi-plus"></i>
                                                        </button>
                                                    </div>
                                                </div>

                                                <div class="mb-3 px-3 mt-4">

                                                    <p class="result-label" id="annuityExplainerPartner" style="font-size: 0.9rem; margin-bottom: 1rem;">
                                                        
                                                    </p>
        
                                                </div>


                                            </form>
                                        </div>
                                    </div>
                                </div>
                                


                        <div class="d-grid gap-2 mt-4 px-3">
                            <button id="resetAssumptionsButton" class="btn btn-lg" style="font-size: medium;background-color:#4CAF50; color:white; border: none; ">
                                Reset All To Default Values
                            </button>
                        </div>
                        
    
                   
    
                
    
            </div>
    
        </div>
    
    </div>
            
    

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="model.js"></script>
    <script src="listeners-dashboard.js"></script>
    
    <script>

        document.addEventListener('DOMContentLoaded', function () {
            const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
        });
        
       
    </script>
    
</body>
</html>

  